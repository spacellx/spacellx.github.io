<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/02/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/02/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87/" class="post-title-link" itemprop="url">命令执行绕过</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-02 01:23:40 / 修改时间：01:25:50" itemprop="dateCreated datePublished" datetime="2022-03-02T01:23:40+08:00">2022-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="命令执行绕过小技巧"><a href="#命令执行绕过小技巧" class="headerlink" title="命令执行绕过小技巧"></a>命令执行绕过小技巧</h1><h1 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h1><h3 id="windows-下"><a href="#windows-下" class="headerlink" title="windows 下"></a>windows 下</h3><blockquote>
<p><code>|</code>直接执行后面的语句<br><code>||</code>如果前面命令是错的那么就执行后面的语句，否则只执行前面的语句<br><code>&amp;</code>前面和后面命令都要执行，无论前面真假<br><code>&amp;&amp;</code>如果前面为假，后面的命令也不执行，如果前面为真则执行两条命令</p>
</blockquote>
<h3 id="Linux-下"><a href="#Linux-下" class="headerlink" title="Linux 下"></a>Linux 下</h3><blockquote>
<p><code>;</code>前面和后面命令都要执行，无论前面真假<br><code>|</code>直接执行后面的语句<br><code>||</code>如果前面命令是错的那么就执行后面的语句，否则只执行前面的语句<br><code>&amp;</code>前面和后面命令都要执行，无论前面真假<br><code>&amp;&amp;</code>如果前面为假，后面的命令也不执行，如果前面为真则执行两条命令</p>
<p><strong>“;”分号用法</strong></p>
<p>方式：command1 ; command2</p>
<p>用;号隔开每个命令, 每个命令按照从左到右的顺序,顺序执行， 彼此之间不关心是否失败， 所有命令都会执行。</p>
</blockquote>
<hr>
<h1 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h1><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;` `&lt;` `&lt;&gt;` 重定向符</span><br><span class="line">`%09`(需要php环境)</span><br><span class="line">`$&#123;IFS&#125;`</span><br><span class="line">`$IFS$9`</span><br><span class="line">`&#123;cat,flag.php&#125;` //用逗号实现了空格功能</span><br><span class="line">`%20`</span><br><span class="line">`%09</span><br><span class="line"></span><br><span class="line">cat flag.txt</span><br><span class="line">cat$&#123;IFS&#125;flag.txt</span><br><span class="line">cat$IFS$9flag.txt</span><br><span class="line">cat&lt;flag.txt</span><br><span class="line">cat&lt;&gt;flag.txt</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<h1 id="命令执行函数"><a href="#命令执行函数" class="headerlink" title="命令执行函数"></a>命令执行函数</h1><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">system()</span><br><span class="line">passthru()</span><br><span class="line">exec()</span><br><span class="line">shell_exec()</span><br><span class="line">popen()</span><br><span class="line">proc_open()</span><br><span class="line">pcntl_exec()</span><br><span class="line">反引号 同shell_exec() </span><br></pre></td></tr></table></figure>

<hr>
<h1 id="黑名单绕过"><a href="#黑名单绕过" class="headerlink" title="黑名单绕过"></a>黑名单绕过</h1><p>拼接</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a=c;b=at;c=fl;d=ag;$a$b $c$d</span><br></pre></td></tr></table></figure>
</blockquote>
<p>base64编码</p>
<blockquote>
<p><code>echo &quot;Y2F0IGZsYWc=&quot;|base64 -d</code><br><code>echo &quot;Y2F0IGZsYWc=&quot;|base64 -d|bash</code> (在bash被过滤的情况下可尝试sh)</p>
</blockquote>
<p>单引号、双引号</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c&quot;&quot;at fl&#x27;&#x27;ag</span><br></pre></td></tr></table></figure>
</blockquote>
<p>反斜线</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c\at fl\ag</span><br></pre></td></tr></table></figure>
</blockquote>
<p>正则 (假设/bin/cat: test: 是一个目录)</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/???/?[a][t] ?&#x27;&#x27;?&#x27;&#x27;?&#x27;&#x27;?&#x27;&#x27;`</span><br><span class="line">`/???/?at ????`</span><br><span class="line">`/???/?[a]&#x27;&#x27;[t] ?&#x27;&#x27;?&#x27;&#x27;?&#x27;&#x27;?&#x27;&#x27;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>$1、$2等和$@</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span><span class="comment"># 是传给脚本的参数个数</span></span><br><span class="line"><span class="variable">$0</span> 是脚本本身的名字</span><br><span class="line"><span class="variable">$1</span> 是传递给该shell脚本的第一个参数</span><br><span class="line"><span class="variable">$2</span> 是传递给该shell脚本的第二个参数</span><br><span class="line"><span class="variable">$</span><span class="selector-tag">@</span> 是传给脚本的所有参数的列表</span><br><span class="line"><span class="variable">$</span>* 是以一个单字符串显示所有向脚本传递的参数，与位置变量不同，参数可超过<span class="number">9</span>个</span><br><span class="line"><span class="variable">$</span><span class="variable">$</span> 是脚本运行的当前进程ID号</span><br><span class="line"><span class="variable">$</span>? 是显示最后命令的退出状态，<span class="number">0</span>表示没有错误，其他表示有错误</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="cat被过滤"><a href="#cat被过滤" class="headerlink" title="cat被过滤"></a>cat被过滤</h1><blockquote>
<p>more:一页一页的显示档案内容<br>less:与 more 类似<br>head:查看头几行<br>tac:从最后一行开始显示，可以看出 tac 是 cat 的反向显示<br>tail:查看尾几行<br>nl：显示的时候，顺便输出行号<br>od:以二进制的方式读取档案内容<br>vi:一种编辑器，这个也可以查看<br>vim:一种编辑器，这个也可以查看<br>sort:可以查看<br>uniq:可以查看<br>file -f:报错出具体内容<br>grep<br>1、在当前目录中，查找后缀有 file 字样的文件中包含 test 字符串的文件，并打印出该字符串的行。此时，可以使用如下命令：<br>grep test *file<br>strings</p>
</blockquote>
<img src="/2022/03/02/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87/1999159-20200719165203379-693026533.png" class="" title="img">

<img src="/2022/03/02/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%BB%95%E8%BF%87/1999159-20200719165210223-677342141.png" class="" title="img">

<p>做到的一道题目，在这里记录一下</p>
<hr>
<h1 id="内敛执行"><a href="#内敛执行" class="headerlink" title="内敛执行"></a>内敛执行</h1><blockquote>
<p>cat$IFS$9<code>ls</code></p>
<p>cat$IFS$9$(ls)</p>
</blockquote>
<p>(内联，就是将``或$()内命令的输出作为输入执行)</p>
<hr>
<h2 id="利用ls-t和-gt-以及换行符绕过长度限制执行命令-文件构造绕过"><a href="#利用ls-t和-gt-以及换行符绕过长度限制执行命令-文件构造绕过" class="headerlink" title="利用ls -t和&gt;以及换行符绕过长度限制执行命令(文件构造绕过)"></a>利用ls -t和&gt;以及换行符绕过长度限制执行命令(文件构造绕过)</h2><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># echo &quot;flag&#123;hahaha&#125;&quot; &gt; flag.txt</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># touch &quot;ag&quot;</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># touch &quot;fl\\&quot;</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># touch &quot;t \\&quot;</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># touch &quot;ca\\&quot;</span></span><br><span class="line">root<span class="variable">@kali</span><span class="symbol">:~/</span>桌面<span class="comment"># ls -t</span></span><br><span class="line"><span class="string">&#x27;ca\&#x27;  &#x27;</span>t \<span class="string">&#x27;  &#x27;</span>fl\<span class="string">&#x27;   ag   flag</span></span><br><span class="line"><span class="string">root@kali:~/桌面# ls -t &gt;a     #将 ls -t 内容写入到a文件中</span></span><br><span class="line"><span class="string">root@kali:~/桌面# sh a</span></span><br><span class="line"><span class="string">a: 1: a: not found</span></span><br><span class="line"><span class="string">flag&#123;hahaha&#125;</span></span><br><span class="line"><span class="string">a: 6: flag.txt: not found</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>\</code>是指换行<br><code>ls -t</code>将文件按时间排序输出<br><code>sh</code>命令可以从一个文件中读取命令</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/02/%E4%BC%AA%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/02/%E4%BC%AA%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/" class="post-title-link" itemprop="url">伪协议学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-02 01:07:36 / 修改时间：01:21:20" itemprop="dateCreated datePublished" datetime="2022-03-02T01:07:36+08:00">2022-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="伪协议学习"><a href="#伪协议学习" class="headerlink" title="伪协议学习"></a>伪协议学习</h1><h1 id="伪协议的学习"><a href="#伪协议的学习" class="headerlink" title="伪协议的学习"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-an-/p/12372220.html">伪协议的学习</a></h1><p>伪协议常常用于文件包含漏洞之中。</p>
<p>在php中能够造成文件包含的函数有include、require、include_once、require_once、highlight_file、show_source、file_get_contents、fopen、file、readfile</p>
<h2 id="0x01-函数"><a href="#0x01-函数" class="headerlink" title="0x01 函数"></a><strong>0x01 函数</strong></h2><h3 id="1-include函数"><a href="#1-include函数" class="headerlink" title="1.include函数"></a><strong>1.include函数</strong></h3><p>可以放在PHP脚本的任意位置，一般放在流程控制的处理部分中。当PHP脚本执行到include指定引入的文件时，才将它包含并尝试执行。这种方式可以把程序执行时的流程进行简单化。当第二次遇到相同文件时，PHP还是会重新解释一次，include相对于require的执行效率下降很多，同时在引入文件中包含用户自定义函数时，PHP在解释过程中会发生函数重复定义问题。include载入成功后，返回1，失败则返回false。</p>
<h3 id="2-require函数"><a href="#2-require函数" class="headerlink" title="2.require函数"></a><strong>2.require函数</strong></h3><p>require函数一般放在PHP脚本的最前面，PHP执行前就会先读入require指定引入的文件，包含并尝试执行引入的脚本文件。require的工作方式是提高PHP的执行效率，当它在同一个网页中解释过一次后，第二次便不会解释。但同样的，正因为它不会重复解释引入文件，所以当PHP中使用循环或条件语句来引入文件时，需要用到include。require载入成功返回1，失败无返回值。</p>
<h3 id="3-include-once和require-once函数"><a href="#3-include-once和require-once函数" class="headerlink" title="3.include_once和require_once函数"></a><strong>3.include_once和require_once函数</strong></h3><p>分别与require / include作用相同，不同的是他们在执行到时会先检查目标内容是不是在之前已经导入过，如果导入过了，那么便不会再次重复引入其同样的内容。</p>
<h3 id="4-highlight-file函数"><a href="#4-highlight-file函数" class="headerlink" title="4.highlight_file函数"></a><strong>4.highlight_file函数</strong></h3><p>highlight_file() 函数对文件进行语法高亮显示。</p>
<p>语法：highlight_file(filename,return) —— filename：必需。要进行高亮处理的 PHP 文件的路径。return：可选。如果设置 true，则本函数返回高亮处理的代码。</p>
<p>该函数通过使用 PHP 语法高亮程序中定义的颜色，输出或返回包含在 filename 中的代码的语法高亮版本。如果 return 参数被设置为 true，那么该函数会返回被高亮处理的代码，而不是输出它们。否则，若成功，则返回 true，失败则返回 false。许多服务器被配置为对带有 phps 后缀的文件进行自动高亮处理。例如，在查看 example.phps 时，将显示该文件被语法高亮显示的源代码。要启用该功能，请把AddType application/x-httpd-php-source .phps添加到 httpd.conf。</p>
<h3 id="5-show-source函数"><a href="#5-show-source函数" class="headerlink" title="5.show_source函数"></a><strong>5.show_source函数</strong></h3><p>该函数是highlight_file函数的别名。</p>
<h3 id="6-file-get-contents函数"><a href="#6-file-get-contents函数" class="headerlink" title="6.file_get_contents函数"></a><strong>6.file_get_contents函数</strong></h3><p>file_get_contents() 函数把整个文件读入一个字符串中。和 file() 一样，不同的是 file_get_contents() 把文件读入一个字符串。file_get_contents() 函数是用于将文件的内容读入到一个字符串中的首选方法。如果操作系统支持，还会使用内存映射技术来增强性能。</p>
<img src="/2022/03/02/%E4%BC%AA%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/1884723-20200227145402957-11433424.png" class="" title="img">

<h3 id="7-file函数"><a href="#7-file函数" class="headerlink" title="7.file函数"></a><strong>7.file函数</strong></h3><p>file() 函数把整个文件读入一个数组中。与 file_get_contents() 类似，不同的是 file() 将文件作为一个数组返回。数组中的每个单元都是文件中相应的一行，包括换行符在内。如果失败，则返回 false。</p>
<img src="/2022/03/02/%E4%BC%AA%E5%8D%8F%E8%AE%AE%E5%AD%A6%E4%B9%A0/1884723-20200227145546672-1410880982.png" class="" title="img">

<h3 id="8-fopen函数"><a href="#8-fopen函数" class="headerlink" title="8.fopen函数"></a><strong>8.<a target="_blank" rel="noopener" href="https://www.runoob.com/php/func-filesystem-fopen.html">fopen函数</a></strong></h3><h3 id="9-readfile函数"><a href="#9-readfile函数" class="headerlink" title="9.readfile函数"></a><strong>9.<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/php/func_filesystem_readfile.asp">readfile函数</a></strong></h3><h2 id="0x02-伪协议"><a href="#0x02-伪协议" class="headerlink" title="0x02 伪协议"></a><strong>0x02 伪协议</strong></h2><h3 id="1-php伪协议："><a href="#1-php伪协议：" class="headerlink" title="1.php伪协议："></a><strong>1.php伪协议：</strong></h3><p>需要开启allow_url_fopen的：php://input、php://stdin、php://memory和php://temp</p>
<p>不需要开启allow_wrl_fopen的：php://filter</p>
<p>在CTF中经常使用的是php://filter和php://input</p>
<p><strong>php://filter用于读取源码，php://input用于执行php代码</strong></p>
<p>==<strong>php://input需要post请求提交数据</strong>==</p>
<p><strong>php://filter可以get提交?a=php://filter/read=convert.base64-encode/resource=xxx.php ==</strong></p>
<h3 id="2-data协议"><a href="#2-data协议" class="headerlink" title="2.data协议"></a><strong>2.data协议</strong></h3><p>php5.2.0起，数据流封装器开始有效，主要用于数据流的读取。如果传入的数据是PHP代码，就会执行代码</p>
<p>使用方法:data://text/plain;base64,xxxx(base64编码后的数据)</p>
<p>data伪协议只有在php&lt;5.3且include=on时可以写木马。</p>
<h3 id="3-file协议"><a href="#3-file协议" class="headerlink" title="3.file协议"></a><strong>3.file协议</strong></h3><p>file://用于访问本地文件系统</p>
<p>用法：file:// [文件的绝对路径和文件名]</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">靶场搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-03-02 01:03:19 / 修改时间：01:06:03" itemprop="dateCreated datePublished" datetime="2022-03-02T01:03:19+08:00">2022-03-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <pre><code>                                    #  靶场搭建
</code></pre>
<h2 id="1、初始化环境："><a href="#1、初始化环境：" class="headerlink" title="1、初始化环境："></a>1、初始化环境：</h2><p>由于是刚打开云服务器（腾讯云，ubuntu20.03）</p>
<p>所以首先</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctrl +alt +t  进入到控制台</span><br><span class="line">sudo passwd root  设置密码</span><br></pre></td></tr></table></figure>

<p>初始化docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd  /root</span><br><span class="line">vi init.sh</span><br></pre></td></tr></table></figure>

<p>在 init.sh编写（.sh文件是脚本文件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#更新系统</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br><span class="line"></span><br><span class="line">#安装 docker和docker-compose</span><br><span class="line">sudo apt install docker docker-compose zip</span><br><span class="line"></span><br><span class="line">#设置镜像加速器    这里我没有买只能用别人的  也可以不用</span><br><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://faalpdo3.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>然后 增加权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod + x init.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="2、搭建ctfd"><a href="#2、搭建ctfd" class="headerlink" title="2、搭建ctfd"></a>2、搭建ctfd</h2><h3 id="1、-开放端口"><a href="#1、-开放端口" class="headerlink" title="1、 开放端口"></a>1、 开放端口</h3><p> 在服务器面板里开放端口</p>
<img src="/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/image-20220224151017125.png" class="" title="image-20220224151017125">

<h3 id="2、拉取镜像"><a href="#2、拉取镜像" class="headerlink" title="2、拉取镜像"></a>2、拉取镜像</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8000:8000 -d ctfd/ctfd</span><br><span class="line">这里没有镜像他会去拉取</span><br></pre></td></tr></table></figure>

<p>然后去访问URL+开放的端口</p>
<p>==这里注意如果是云服务器应该用公网ip，虚拟机直接用ifconfig查看==</p>
<p>进入初始化界面后设置账号密码就可以了</p>
<h3 id="3-进入到docker中"><a href="#3-进入到docker中" class="headerlink" title="3.进入到docker中"></a>3.进入到docker中</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps  查看id</span><br><span class="line">docker exec -it id /bin/bash</span><br></pre></td></tr></table></figure>



<h3 id="4汉化ctfd"><a href="#4汉化ctfd" class="headerlink" title="4汉化ctfd"></a>4汉化ctfd</h3><p>下载汉化包</p>
<p><strong>首先应该去到要下载的目录在执行命令</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Guf/CTFd_chinese_CN.git</span><br><span class="line"></span><br><span class="line">切换到CTFd目录 删除主题</span><br><span class="line">rm -rf themes   文件夹删除命令</span><br><span class="line">然后把下载好的主题以及对应的版本cp过来，要下载刚才themes那个文件夹里面</span><br><span class="line">cp -r /opt/CTFd/CTFd_chinese_CN/V3.1.1/CTFd-3.1.1/CTFd/themes /opt/CTFd      应该是这个忘记截图了</span><br></pre></td></tr></table></figure>



<h2 id="三、出题"><a href="#三、出题" class="headerlink" title="三、出题"></a>三、出题</h2><h3 id="1、编写dockerfile"><a href="#1、编写dockerfile" class="headerlink" title="1、编写dockerfile"></a>1、编写dockerfile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">我是在root目录下创建文件夹里面创建dockerfile</span><br><span class="line">mkdir text</span><br><span class="line">cd text</span><br><span class="line">touch Dockerfile</span><br><span class="line">vim Dockerfile</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">复制这段  适当改一下</span><br><span class="line">FROM sakadonohito/php5.6.23-apache</span><br><span class="line"></span><br><span class="line">LABEL Author=&quot;space&quot;</span><br><span class="line"></span><br><span class="line">COPY ./src/ /var/www/html/</span><br><span class="line"></span><br><span class="line">RUN chmod -R 755 /var/www/html/ &amp;&amp; \</span><br><span class="line">    chown -R root:root /var/www/html </span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD sh -c &quot;apache2-foreground&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2、创建src目录"><a href="#2、创建src目录" class="headerlink" title="2、创建src目录"></a>2、创建src目录</h3><p>要在dockerfile文件所在的目录下创建</p>
<img src="/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/image-20220302010001325.png" class="" title="image-20220302010001325">

<h3 id="3-运行docker"><a href="#3-运行docker" class="headerlink" title="3.运行docker"></a>3.运行docker</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t trick:v3 .   // .的意思是把当前目录下的文件都给打包</span><br><span class="line">这里容器名称为 trick 版本为v3</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 7000:80 -d trick:v3</span><br><span class="line">运行这个容器</span><br></pre></td></tr></table></figure>

<img src="/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/image-20220302005906224.png" class="" title="image-20220302005906224">





<img src="/2022/03/02/%E9%9D%B6%E5%9C%BA%E6%90%AD%E5%BB%BA/image-20220302010146552.png" class="" title="image-20220302010146552">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/25/git%E5%AD%A6%E4%B9%A01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/25/git%E5%AD%A6%E4%B9%A01/" class="post-title-link" itemprop="url">git学习1</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-25 22:46:41" itemprop="dateCreated datePublished" datetime="2022-02-25T22:46:41+08:00">2022-02-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-26 11:32:06" itemprop="dateModified" datetime="2022-02-26T11:32:06+08:00">2022-02-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="git学习"><a href="#git学习" class="headerlink" title="git学习"></a>git学习</h1><h2 id="一、git的概述"><a href="#一、git的概述" class="headerlink" title="一、git的概述"></a>一、git的概述</h2><h3 id="1、-版本控制的两种方式"><a href="#1、-版本控制的两种方式" class="headerlink" title="1、 版本控制的两种方式"></a>1、 版本控制的两种方式</h3><p>1、集中式版本控制：</p>
<p>集中化的版本控制系统诸如 CVS、 SVN 等，都有一个单一的集中管理的服务器，保存所有文件的修订版本，而协同工作的人们都通过客户端连到这台服务器，取出最新的文件或者提交更新（==简单来说就是类似实时共享文件，所有人都在集中管理的服务器里修改文件==）</p>
<p>2、分布式版本控制工具</p>
<p>像 Git 这种分布式版本控制工具，客户端提取的不是最新版本的文件快照，而是把代码仓库完整地镜像下来（本地库）。==（也就是说每台电脑都等价于远程库，即使远程库宕机了，其他人也可以继续工作，等远程库好了，在提交新文件）==</p>
<h3 id="2、工作机制"><a href="#2、工作机制" class="headerlink" title="2、工作机制"></a>2、工作机制</h3><img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225193020396.png" class="" title="image-20220225193020396">



<h2 id="二、git的常用命令"><a href="#二、git的常用命令" class="headerlink" title="二、git的常用命令"></a>二、git的常用命令</h2><h3 id="1-1用户签名"><a href="#1-1用户签名" class="headerlink" title="1.1用户签名"></a>1.1用户签名</h3><p>设置用户签名和绑定邮箱（邮箱可以虚拟）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git configure --global user.name=</span><br><span class="line">git configure --global user.email   //global 是全局的意思</span><br></pre></td></tr></table></figure>

<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225200835726.png" class="" title="image-20220225200835726">

<p> <strong>Git 首次安装必须设置一下用户签名，否则无法提交代码</strong>。</p>
<h3 id="1-2初始化本地仓库"><a href="#1-2初始化本地仓库" class="headerlink" title="1.2初始化本地仓库"></a>1.2初始化本地仓库</h3><p><strong>命令：git init</strong></p>
<p>首先在喜欢的盘符下面创建文件夹，在打开git bash，然后执行命令</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225201302703.png" class="" title="image-20220225201302703">

<h3 id="1-3-查看git-的状态"><a href="#1-3-查看git-的状态" class="headerlink" title="1.3 查看git 的状态"></a>1.3 查看git 的状态</h3><p><strong>命令：git status</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225201744567.png" class="" title="image-20220225201744567">

<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225201943589.png" class="" title="image-20220225201943589">

<h3 id="1-4-上传到暂存区，以及删除暂存区的文件"><a href="#1-4-上传到暂存区，以及删除暂存区的文件" class="headerlink" title="1.4 上传到暂存区，以及删除暂存区的文件"></a>1.4 上传到暂存区，以及删除暂存区的文件</h3><p><strong>上传命令： git add 文件</strong></p>
<p><strong>删除命令： git rm –cached 文件</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225202529243.png" class="" title="image-20220225202529243">

<h3 id="1-5将暂存区文件上传到本地库以及查看提交情况"><a href="#1-5将暂存区文件上传到本地库以及查看提交情况" class="headerlink" title="1.5将暂存区文件上传到本地库以及查看提交情况"></a>1.5将暂存区文件上传到本地库以及查看提交情况</h3><p>上传命令：git commit -m “日志信息” 文件名</p>
<p>查看命令 ：git reflog  或者 git log</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225205204863.png" class="" title="image-20220225205204863">

<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225210714083.png" class="" title="image-20220225210714083">

<h3 id="1-6-版本穿插（回到之前的版本）"><a href="#1-6-版本穿插（回到之前的版本）" class="headerlink" title="1.6 版本穿插（回到之前的版本）"></a>1.6 版本穿插（回到之前的版本）</h3><p><strong>命令：git reset –hard  id</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225221148387.png" class="" title="image-20220225221148387">

<h2 id="三、-git分支"><a href="#三、-git分支" class="headerlink" title="三、 git分支"></a>三、 git分支</h2><h3 id="1-1-分支概念"><a href="#1-1-分支概念" class="headerlink" title="1.1 分支概念"></a>1.1 分支概念</h3><p>在版本控制过程中，同时推进多个任务，为每个任务，我们就可以创建每个任务的单独分支。使用分支意味着程序员可以把自己的工作从开发主线上分离开来， 开发自己分支的时候，不会影响主线分支的运行。对于初学者而言，分支可以简单理解为副本，一个分支就是一个单独的副本。（分支底层其实也是指针的引用）</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/f1d0659ed000e9dfa295fc696a58cf74.png" class="" title="某项目有四条分支">

<h3 id="1-2分支的好处"><a href="#1-2分支的好处" class="headerlink" title="1.2分支的好处"></a>1.2分支的好处</h3><p>同时并行推进多个功能开发，提高开发效率。</p>
<p>各个分支在开发过程中，如果某一个分支开发失败，不会对其他分支有任何影响。失败的分支删除重新开始即可。</p>
<h3 id="1-3-分支常用命令：查看。创建-切换"><a href="#1-3-分支常用命令：查看。创建-切换" class="headerlink" title="1.3 分支常用命令：查看。创建    切换"></a>1.3 分支常用命令：查看。创建    切换</h3><img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225225034557.png" class="" title="image-20220225225034557">



<p><strong>查看：git branch -v</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225225806059.png" class="" title="image-20220225225806059">

<p><strong>创建： git branch 分支名</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225225837018.png" class="" title="image-20220225225837018">

<p>切换： git  checkout 分支名</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225230852285.png" class="" title="image-20220225230852285">

<p>==<strong>注意：在host分支下的修改提交到本地仓库后，master分支的text文件并没有改变，需要合并分支才可以</strong>==</p>
<h3 id="1-4-合并分支（将指定分支合并到当前分支）"><a href="#1-4-合并分支（将指定分支合并到当前分支）" class="headerlink" title="1.4 合并分支（将指定分支合并到当前分支）"></a>1.4 合并分支（将指定分支合并到当前分支）</h3><p><strong>命令：git merge 分支</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225231617732.png" class="" title="image-20220225231617732">

<h3 id="1-5-合并冲突原因以及解决方法"><a href="#1-5-合并冲突原因以及解决方法" class="headerlink" title="1.5 合并冲突原因以及解决方法"></a>1.5 合并冲突原因以及解决方法</h3><p> <strong>冲突产生的原因</strong></p>
<p>并分支时，两个分支在同一个文件的同一个位置有两套完全不同的修改。 Git 无法替我们决定使用哪一个，因此，必须<strong>人为决定</strong>新代码内容。</p>
<p><strong>当在同一行进行修改时：会出现报错</strong></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225235933628.png" class="" title="image-20220225235933628">

<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225235159233.png" class="" title="image-20220225235159233">

<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220225235756771.png" class="" title="image-20220225235756771">

<p>==<strong>注意：当出现冲突时，在git add之后使用git commit -m “日志”后面不能加上文件名</strong>==</p>
<p>当修改在不同行：</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220226000410247.png" class="" title="image-20220226000410247">

<p>同样报错</p>
<p>报错原因：我的理解就是无论是不是同一行修改，只要两个分支都修改了，导致git无法区别哪个是最新的就会报错。</p>
<h2 id="github创建远程库"><a href="#github创建远程库" class="headerlink" title="github创建远程库"></a>github创建远程库</h2><h3 id="1、1由于之前已经创建过一个仓库，所以新建一个仓库"><a href="#1、1由于之前已经创建过一个仓库，所以新建一个仓库" class="headerlink" title="1、1由于之前已经创建过一个仓库，所以新建一个仓库"></a>1、1由于之前已经创建过一个仓库，所以新建一个仓库</h3><p> 点击图标旁边的下三角形，选择Your profile 进来之后选择Repositories </p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/70.png" class="" title="img">

<p>  然后我们new一个仓库出来，点击new</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/70-16458387370221.png" class="" title="img">

<p>  然后进来的Repository name随便起一个名字，然后最下面的create repository就建好远程仓库啦</p>
<p><strong><img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/70-16458387370232.png" class="" title="img"></strong></p>
<h3 id="1-2创建远程仓库别名"><a href="#1-2创建远程仓库别名" class="headerlink" title="1.2创建远程仓库别名"></a>1.2创建远程仓库别名</h3><p>命令：git remote -v  差康当前所有远程地址别名</p>
<p>命令：git remote add 别名 远程地址       创建别名</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220226092946711.png" class="" title="image-20220226092946711">

<h3 id="1、3将本地仓库推送到远程仓库推送命令："><a href="#1、3将本地仓库推送到远程仓库推送命令：" class="headerlink" title="1、3将本地仓库推送到远程仓库推送命令："></a>1、3将本地仓库推送到远程仓库推送命令：</h3><p>推送命令：git push  仓库名  分支名（需要推送的分支)</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220226094410186.png" class="" title="image-20220226094410186">

<h3 id="1-4-将远程仓库的代码拉取下来，以便更新本地仓库代码"><a href="#1-4-将远程仓库的代码拉取下来，以便更新本地仓库代码" class="headerlink" title="1.4 将远程仓库的代码拉取下来，以便更新本地仓库代码"></a>1.4 将远程仓库的代码拉取下来，以便更新本地仓库代码</h3><p>命令：git pull 仓库名 分支</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/image-20220226095005243.png" class="" title="image-20220226095005243">

<h3 id="1-5-克隆远程仓库"><a href="#1-5-克隆远程仓库" class="headerlink" title="1.5 克隆远程仓库"></a>1.5 克隆远程仓库</h3><p><strong>命令：git clone 链接</strong></p>
<p>clone 会做如下操作：</p>
<ol>
<li>拉取代码。</li>
<li>初始化本地仓库。</li>
<li>创建别名。</li>
</ol>
<p>在远程库获取地址URL</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/ff23330d5eab8f2a681c6f91727a37ca.png" class="" title="img">

<h3 id="1-6团队内合作"><a href="#1-6团队内合作" class="headerlink" title="1.6团队内合作"></a>1.6团队内合作</h3><h2 id="GitHub-团队内协作"><a href="#GitHub-团队内协作" class="headerlink" title="GitHub_团队内协作"></a>GitHub_团队内协作</h2><p>一、选择邀请合作者。（在仓库设置里操作）</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/945f1ba6e29fb725ee0d852ff59c3851.png" class="" title="img">

<p>二、填入目标合作者。</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/ee1b6a6656efe2adbb740b38954529b9.png" class="" title="img">

<p>三、复制网址发送给你目标合作者 ， 复制内容如下：<a target="_blank" rel="noopener" href="https://github.com/atguiguyueyue/git-shTest/invitations%E3%80%82">https://github.com/atguiguyueyue/git-shTest/invitations。</a></p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/0f5ec0155e64421d315594aa537fd187.png" class="" title="img">

<p>四、目标合作者接收到网址，用浏览器打开它，点击接受邀请。</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/295a2398e0a3150d50530d5db21103aa.png" class="" title="img">

<p>五、接受邀请成功之后，可以在目标合作者Github账号上看到将来共同开发远程仓库。</p>
<img src="/2022/02/25/git%E5%AD%A6%E4%B9%A01/ddca26e11277016e10eb610195567dac.png" class="" title="img">

<p>六、目标合作者可以修改内容并 push 到远程仓库。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/" class="post-title-link" itemprop="url">命令执行</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-23 22:41:46" itemprop="dateCreated datePublished" datetime="2022-02-23T22:41:46+08:00">2022-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-28 12:13:26" itemprop="dateModified" datetime="2022-02-28T12:13:26+08:00">2022-02-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h1><h2 id="web29"><a href="#web29" class="headerlink" title="==web29=="></a>==web29==</h2><h3 id="前提补充知识："><a href="#前提补充知识：" class="headerlink" title="前提补充知识："></a>前提补充知识：</h3><h4 id="1、四个外部执行命令"><a href="#1、四个外部执行命令" class="headerlink" title="1、四个外部执行命令"></a>1、四个外部执行命令</h4><p>exec（）、passthru（）、system（）、shell_exec（）</p>
<h4 id="2、通配符"><a href="#2、通配符" class="headerlink" title="2、通配符"></a>2、通配符</h4><p>当查找文件夹时；当不知道真正字符或者不想键入完整名字时，常常使用通配符代替一个或多个真正字符。（==可以通过这样绕过限制==</p>
<p><strong>可以使用星号（*）代替零个、单个或多个字符</strong></p>
<p><strong>可以使用问号(?)代替一个字符</strong></p>
<p><img src="%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220222225722049.png" alt="image-20220222225722049"><img src="%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220222230204874.png" alt="image-20220222230204874"></p>
<h2 id="web-30"><a href="#web-30" class="headerlink" title="==web 30 ==="></a>==web 30 ===</h2><img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220222230459915.png" class="" title="image-20220222230459915">

<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220222230856809.png" class="" title="image-20220222230856809">







<h2 id="web31-eval嵌套执行get-以及空格绕过"><a href="#web31-eval嵌套执行get-以及空格绕过" class="headerlink" title="==web31 *   eval嵌套执行get 以及空格绕过=="></a>==web31 *   eval嵌套执行get 以及空格绕过==</h2><p><img src="%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223001513510.png" alt="image-20220223001513510"><img src="%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223003134411.png"></p>
<h3 id="32-主要是过滤了分号和括号（了解无分号函数，以及伪协议）"><a href="#32-主要是过滤了分号和括号（了解无分号函数，以及伪协议）" class="headerlink" title="==32  主要是过滤了分号和括号（了解无分号函数，以及伪协议）=="></a>==32  主要是过滤了分号和括号（了解无分号函数，以及伪协议）==</h3><p>分析：</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223115610843.png" class="" title="image-20220223115610843">

<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/1999159-20201002223158950-1419102854.png" class="" title="img">



<p><strong>做法：</strong>php://filter/convert.base64-encode/resource=flag.php</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223122013144.png" class="" title="image-20220223122013144">

<h3 id="web33-主要尝试几个无括号函数"><a href="#web33-主要尝试几个无括号函数" class="headerlink" title="==web33 主要尝试几个无括号函数=="></a>==web33 主要尝试几个无括号函数==</h3><p>方法一</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223223719202.png" class="" title="image-20220223223719202">

<p>方法二</p>
<p><img src="D:/boke/source/_posts/命令执行/image-20220223224212323.png" alt="image-20220223224212323"></p>
<h3 id="web34"><a href="#web34" class="headerlink" title="==web34=="></a>==web34==</h3><p>分析：</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220223225056215.png" class="" title="image-20220223225056215">

<p>web35和36都一样</p>
<h3 id="web37-include文件包含"><a href="#web37-include文件包含" class="headerlink" title="==web37 include文件包含=="></a>==web37 include文件包含==</h3><h4 id="补充知识：include和data伪协议"><a href="#补充知识：include和data伪协议" class="headerlink" title="补充知识：include和data伪协议"></a>补充知识：include和data伪协议</h4><p>data://，可以让用户来控制输入流，当它与包含函数结合时，用户输入的data://流会被当作php文件执行</p>
<p>用法：data://text/plain,<?php phpinfo();?></p>
<p>可以参考笔记伪协议学习</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220227202837027.png" class="" title="image-20220227202837027">

<h3 id="web-38-include文件包涵（过滤了PHP）"><a href="#web-38-include文件包涵（过滤了PHP）" class="headerlink" title="==web 38 include文件包涵（过滤了PHP）=="></a>==web 38 include文件包涵（过滤了PHP）==</h3><h4 id="前提知识：PHP过滤绕过可以通过base64-或用-lt-代替-lt-php"><a href="#前提知识：PHP过滤绕过可以通过base64-或用-lt-代替-lt-php" class="headerlink" title="前提知识：PHP过滤绕过可以通过base64 或用&lt;?==  代替&lt;?php"></a>前提知识：PHP过滤绕过可以通过base64 或用&lt;?==  代替&lt;?php</h4><p>分析：</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220227204038939.png" class="" title="image-20220227204038939">

<p>做法一：</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220227204328459.png" class="" title="image-20220227204328459">

<p>做法二：用base64</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220227205212455.png" class="" title="image-20220227205212455">

<h3 id="web39"><a href="#web39" class="headerlink" title="web39"></a>web39</h3><p>继续用上题的解法</p>
<img src="/2022/02/23/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/image-20220227210520291.png" class="" title="image-20220227210520291">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/" class="post-title-link" itemprop="url">docker高级篇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-02-23 22:19:21 / 修改时间：22:20:36" itemprop="dateCreated datePublished" datetime="2022-02-23T22:19:21+08:00">2022-02-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="高级篇"><a href="#高级篇" class="headerlink" title="高级篇"></a>高级篇</h1><h2 id="1、docker复杂安装详说"><a href="#1、docker复杂安装详说" class="headerlink" title="1、docker复杂安装详说"></a>1、docker复杂安装详说</h2><p>mysql的主从复制：指数据可以从一个MySQL数据库服务器主节点复制到一个或多个从节点。</p>
<p>优点：主库故障后，可切换到从数据库继续工作，一定程度上实现高可用。</p>
<h4 id="主从复制的原理"><a href="#主从复制的原理" class="headerlink" title="主从复制的原理"></a>主从复制的原理</h4><img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/v2-12f36a0aa2ea88020809173182e54e73_r.jpg" class="" title="preview">

<h4 id="1-1"><a href="#1-1" class="headerlink" title="1.1"></a>1.1</h4><img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220213349818.png" class="" title="image-20220220213349818">

<h4 id="1-2"><a href="#1-2" class="headerlink" title="1.2"></a>1.2</h4><p> 进入/mydata/mysql-master/conf目录下新建my.cnf</p>
<p>·     vim my.cnf            相当于配置文件</p>
<p>在里面写入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">## 设置server_id，同一局域网中需要唯一</span><br><span class="line">server_id=101 </span><br><span class="line">## 指定不需要同步的数据库名称</span><br><span class="line">binlog-ignore-db=mysql  </span><br><span class="line">## 开启二进制日志功能</span><br><span class="line">log-bin=mall-mysql-bin  </span><br><span class="line">## 设置二进制日志使用内存大小（事务）</span><br><span class="line">binlog_cache_size=1M  </span><br><span class="line">## 设置使用的二进制日志格式（mixed,statement,row）</span><br><span class="line">binlog_format=mixed  </span><br><span class="line">## 二进制日志过期清理时间。默认值为0，表示不自动清理。</span><br><span class="line">expire_logs_days=7  </span><br><span class="line">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</span><br><span class="line">## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</span><br><span class="line">slave_skip_errors=1062</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220214646298.png" class="" title="image-20220220214646298">

<h4 id="1-3-修改完配置后重启master实例"><a href="#1-3-修改完配置后重启master实例" class="headerlink" title="1.3     修改完配置后重启master实例"></a>1.3     修改完配置后重启master实例</h4><p>·     docker restart mysql-master</p>
<h4 id="1-4-进入mysql-master容器"><a href="#1-4-进入mysql-master容器" class="headerlink" title="1.4   进入mysql-master容器"></a>1.4   进入mysql-master容器</h4><p>·     docker exec -it mysql-master /bin/bash</p>
<p>·     mysql -uroot -proot</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220215929141.png" class="" title="image-20220220215929141">

<h4 id="1-5-master容器实例内创建数据同步用户"><a href="#1-5-master容器实例内创建数据同步用户" class="headerlink" title="1.5    master容器实例内创建数据同步用户"></a>1.5    master容器实例内创建数据同步用户</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">·	CREATE USER &#x27;slave&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br><span class="line">·	GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#x27;slave&#x27;@&#x27;%&#x27;;</span><br><span class="line">授予**上的复制从机和复制客户端权限</span><br></pre></td></tr></table></figure>

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220220208250.png" class="" title="image-20220220220208250">

<h4 id="新建从服务器容器实例3308"><a href="#新建从服务器容器实例3308" class="headerlink" title="新建从服务器容器实例3308"></a>新建从服务器容器实例3308</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3308:3306 --name mysql-slave \传递</span><br><span class="line">-v /mydata/mysql-slave/log:/var/log/mysql \</span><br><span class="line">-v /mydata/mysql-slave/data:/var/lib/mysql \</span><br><span class="line">-v /mydata/mysql-slave/conf:/etc/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=root  \</span><br><span class="line">-d mysql:5.7</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220222042002.png" class="" title="image-20220220222042002">

<h4 id="1-6配置文件"><a href="#1-6配置文件" class="headerlink" title="1.6配置文件"></a>1.6配置文件</h4><p>·     进入/mydata/mysql-slave/conf目录下新建my.cnf</p>
<p>·     vim my.cnf</p>
<p>[mysqld]</p>
<p>## 设置server_id，同一局域网中需要唯一</p>
<p>server_id=102</p>
<p>## 指定不需要同步的数据库名称</p>
<p>binlog-ignore-db=mysql  </p>
<p>## 开启二进制日志功能，以备Slave作为其它数据库实例的Master时使用</p>
<p>log-bin=mall-mysql-slave1-bin  </p>
<p>## 设置二进制日志使用内存大小（事务）</p>
<p>binlog_cache_size=1M  </p>
<p>## 设置使用的二进制日志格式（mixed,statement,row）</p>
<p>binlog_format=mixed  </p>
<p>## 二进制日志过期清理时间。默认值为0，表示不自动清理。</p>
<p>expire_logs_days=7  </p>
<p>## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</p>
<p>## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</p>
<p>slave_skip_errors=1062  </p>
<p>## relay_log配置中继日志</p>
<p>relay_log=mall-mysql-relay-bin  </p>
<p>## log_slave_updates表示slave将复制事件写进自己的二进制日志</p>
<p>log_slave_updates=1  </p>
<p>## slave设置为只读（具有super权限的用户除外）</p>
<p>read_only=1</p>
<p>·     修改完配置后重启slave实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart mysql-slave</span><br></pre></td></tr></table></figure>

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220222711529.png" class="" title="image-20220220222711529">

<h4 id="在主数据库中查看主从同步状态"><a href="#在主数据库中查看主从同步状态" class="headerlink" title="在主数据库中查看主从同步状态"></a>在主数据库中查看主从同步状态</h4><img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220222953684.png" class="" title="image-20220220222953684">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql-master /bin/bash</span><br><span class="line">mysql -uroot -proot</span><br><span class="line"> show master status;</span><br></pre></td></tr></table></figure>

<h4 id="进入mysql-slave容器"><a href="#进入mysql-slave容器" class="headerlink" title="进入mysql-slave容器"></a>进入mysql-slave容器</h4><p>·     docker exec -it mysql-slave /bin/bash</p>
<p>mysql -uroot -proot</p>
<p>==问题==:突然之间不知道为什么mysql-save突然关闭了</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220230552008.png" class="" title="image-20220220230552008">



<h4 id="在从数据库中配置主从复制"><a href="#在从数据库中配置主从复制" class="headerlink" title="在从数据库中配置主从复制"></a>在从数据库中配置主从复制</h4><p>change master to master_host=’宿主机192.168.220.128’, master_user=’slave’, master_password=’123456’, master_port=3307, master_log_file=’mall-mysql-bin.000001’, master_log_pos=617, master_connect_retry=30;</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220232741376.png" class="" title="image-20220220232741376">

<p>·     主从复制命令参数说明</p>
<p>master_host：主数据库的IP地址；</p>
<p>master_port：主数据库的运行端口；</p>
<p>master_user：在主数据库创建的用于同步数据的用户账号；</p>
<p>master_password：在主数据库创建的用于同步数据的用户密码；</p>
<p>master_log_file：指定从数据库要复制数据的日志文件，通过查看主数据的状态，获取File参数；</p>
<p>master_log_pos：指定从数据库从哪个位置开始复制数据，通过查看主数据的状态，获取Position参数；</p>
<p>master_connect_retry：连接失败重试的时间间隔，单位为秒。  </p>
<h4 id="·-在从数据库中查看主从同步状态"><a href="#·-在从数据库中查看主从同步状态" class="headerlink" title="·     在从数据库中查看主从同步状态"></a>·     在从数据库中查看主从同步状态</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">·	show slave status \G;           </span><br></pre></td></tr></table></figure>

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220233256682.png" class="" title="image-20220220233256682">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220233355897.png" class="" title="image-20220220233355897">

<h4 id="在从数据库中开启主从同步"><a href="#在从数据库中开启主从同步" class="headerlink" title="在从数据库中开启主从同步"></a>在从数据库中开启主从同步</h4><img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220233502177.png" class="" title="image-20220220233502177">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220233532977.png" class="" title="image-20220220233532977">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220233847615.png" class="" title="image-20220220233847615">



<p>·     主从复制测试</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220235207199.png" class="" title="image-20220220235207199">

<p>从数据库</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220220235345217.png" class="" title="image-20220220235345217">



<h3 id="2、安装Redis集群"><a href="#2、安装Redis集群" class="headerlink" title="2、安装Redis集群"></a>2、安装Redis集群</h3><p>·  1、哈希取余分区</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221000232782.png" class="" title="image-20220221000232782">

<h5 id="一致性哈希算法分区："><a href="#一致性哈希算法分区：" class="headerlink" title="一致性哈希算法分区："></a>一致性哈希算法分区：</h5><p><strong>目的：</strong>    提出一致性Hash解决方案。 目的是当服务器个数发生变动时， 尽量减少影响客户端到服务器的映射关</p>
<p> <strong>3大步骤</strong></p>
<h5 id="2、-一致性哈希环"><a href="#2、-一致性哈希环" class="headerlink" title="2、==一致性哈希环=="></a>2、==一致性哈希环==</h5><p>  一致性哈希算法必然有个hash函数并按照算法产生hash值，这个算法的所有可能哈希值会构成一个全量集，这个集合可以成为一个hash空间[0,2^32-1]，这个是一个线性空间，但是在算法中，我们通过适当的逻辑控制将它首尾相连(0 = 2^32),这样让它逻辑上形成了一个环形空间。</p>
<p>  它也是按照使用取模的方法，前面笔记介绍的节点取模法是对节点（服务器）的数量进行取模。而一致性Hash算法是对2^32取模，简单来说，一致性Hash算法将整个哈希值空间组织成一个虚拟的圆环，如假设某哈希函数H的值空间为0-2^32-1（即哈希值是一个32位无符号整形），整个哈希环如下图：整个空间按顺时针方向组织，圆环的正上方的点代表0，0点右侧的第一个点代表1，以此类推，2、3、4、……直到2^32-1，也就是说0点左侧的第一个点代表2^32-1， 0和2^32-1在零点中方向重合，我们把这个由2^32个点组成的圆环称为Hash环。</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221001719424.png" class="" title="image-20220221001719424">

<p>节点映射</p>
<p>  将集群中各个IP节点映射到环上的某一个位置。</p>
<p>  将各个服务器使用Hash进行一个哈希，具体可以选择服务器的IP或主机名作为关键字进行哈希，这样每台机器就能确定其在哈希环上的位置。</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221001853312.png" class="" title="image-20220221001853312">

<p>·     key落到服务器的落键规则</p>
<p>当我们需要存储一个kv键值对时，首先计算key的hash值，hash(key)，将这个key使用相同的函数Hash计算出哈希值并确定此数据在环上的位置，<strong>从此位置沿环顺时针<strong><strong>“</strong></strong>行走****”</strong>，第一台遇到的服务器就是其应该定位到的服务器，并将该键值对存储在该节点上。</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221002022031.png" class="" title="image-20220221002022031">

<p>优点：容错性和扩展性</p>
<p>缺点：由于节点少，出现数据倾斜问题</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221002648233.png" class="" title="image-20220221002648233">

<h5 id="3、-哈希槽分区"><a href="#3、-哈希槽分区" class="headerlink" title="3、 哈希槽分区"></a>3、 哈希槽分区</h5><p>目的：为了解决一致性hash算法带来的数据倾斜问题</p>
<p>哈希曹本质上是一个数组</p>
<p>2 能干什么</p>
<p>解决均匀分配的问题，在数据和节点之间又加入了一层，把这层称为哈希槽（slot），用于管理数据和节点之间的关系，现在就相当于节点上放的是槽，槽里放的是数据。</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image002.jpg" class="" title="graphic">

<p>槽解决的是粒度问题，相当于把粒度变大了，这样便于数据移动。</p>
<p>哈希解决的是映射问题，使用key的哈希值来计算所在的槽，便于数据分配。</p>
<p>（我的理解就是，槽相当于很多个小方格，一个小方格有很多数据，而固定槽数又方便了与结点的对应关系。）</p>
<p>结点与槽的映射</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221005314139.png" class="" title="image-20220221005314139">



<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>命令说明</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221010448052.png" class="" title="image-20220221010448052">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221011023045.png" class="" title="image-20220221011023045">

<p>数据存储</p>
<h4 id="2-1开始安装"><a href="#2-1开始安装" class="headerlink" title="2.1开始安装"></a>2.1开始安装</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">·	systemctl start docker  打开docker，有防火墙记得关闭</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>docker run -d –name redis-node-1 –net host –privileged=true -v /data/redis/share/redis-node-1:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6381</p>
<p>docker run -d –name redis-node-2 –net host –privileged=true -v /data/redis/share/redis-node-2:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6382</p>
<p>docker run -d –name redis-node-3 –net host –privileged=true -v /data/redis/share/redis-node-3:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6383</p>
<p>docker run -d –name redis-node-4 –net host –privileged=true -v /data/redis/share/redis-node-4:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6384</p>
<p>docker run -d –name redis-node-5 –net host –privileged=true -v /data/redis/share/redis-node-5:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6385</p>
<p>docker run -d –name redis-node-6 –net host –privileged=true -v /data/redis/share/redis-node-6:/data redis:6.0.8 –cluster-enabled yes –appendonly yes –port 6386</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221011200823.png" class="" title="image-20220221011200823">



<h4 id="2-2·-进入容器redis-node-1并为6台机器构建集群关系"><a href="#2-2·-进入容器redis-node-1并为6台机器构建集群关系" class="headerlink" title="2.2·     进入容器redis-node-1并为6台机器构建集群关系"></a>2.2·     进入容器redis-node-1并为6台机器构建集群关系</h4><p>1、进入容器</p>
<p>docker exec -it redis-node-1 /bin/bash</p>
<p>2、构建主从关系</p>
<p>==注意，进入docker容器后才能执行一下命令，且注意自己的真实IP地址==</p>
<p>redis-cli –cluster create 192.168.220.128:6381 192.168.220.128:6382 192.168.220.128:6383 192.168.220.128:6384 192.168.220.128:6385 192.168.220.128:6386 –cluster-replicas 1 </p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221012446954.png" class="" title="image-20220221012446954">

<p>–cluster-replicas 1 表示为每个master创建一个slave节点</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221012743663.png" class="" title="image-20220221012743663">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221104500863.png" class="" title="image-20220221104500863">

<p>​    ####  2.3 链接进入6381作为切入点，查看集群状态</p>
<p>​       Redis-cli -p 6381</p>
<h4 id="2-4-链接进入6381作为切入点，查看节点状态"><a href="#2-4-链接进入6381作为切入点，查看节点状态" class="headerlink" title="2.4    链接进入6381作为切入点，查看节点状态"></a>2.4    链接进入6381作为切入点，查看节点状态</h4><p>​      cluster info</p>
<p>​        cluster nodes</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221104933945.png" class="" title="image-20220221104933945">

<h4 id="2-5主从容错切换迁移案例"><a href="#2-5主从容错切换迁移案例" class="headerlink" title="2.5主从容错切换迁移案例"></a>2.5主从容错切换迁移案例</h4><p>redis-cli -p 6381 -c</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221110707577.png" class="" title="image-20220221110707577">

<h5 id="·-查看集群信息"><a href="#·-查看集群信息" class="headerlink" title="·     查看集群信息"></a>·     查看集群信息</h5><p>ctrl +c           退出redis</p>
<p>  redis-cli  –cluster check 192.168.220.128:6381  </p>
<h4 id="2-6容错切换迁移"><a href="#2-6容错切换迁移" class="headerlink" title="2.6容错切换迁移"></a>2.6容错切换迁移</h4><p>·     主6381和从机切换，先停止主机6381</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221113853389.png" class="" title="image-20220221113853389">

<p>·     6381主机停了，对应的真实从机上位</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221114023249.png" class="" title="image-20220221114023249">



<p>要想回到之前的，就先停掉从在开启从。</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221120507352.png" class="" title="image-20220221120507352">



<h4 id="2-7主从扩容"><a href="#2-7主从扩容" class="headerlink" title="2.7主从扩容"></a>2.7主从扩容</h4><p>难点：在于hash槽的分配</p>
<p>做法：</p>
<p>1、新建6387、6388两个节点+新建后启动+查看</p>
<table>
<thead>
<tr>
<th>docker run -d  –name redis-node-7 –net host –privileged=true -v  /data/redis/share/redis-node-7:/data redis:6.0.8 –cluster-enabled yes  –appendonly yes –port 6387</th>
</tr>
</thead>
<tbody><tr>
<td>docker run -d  –name redis-node-8 –net host –privileged=true -v  /data/redis/share/redis-node-8:/data redis:6.0.8 –cluster-enabled yes  –appendonly yes –port 6388</td>
</tr>
</tbody></table>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221122841300.png" class="" title="image-20220221122841300">

<p>2、·     将新增的6387节点(空槽号)作为master节点加入原集群</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221123625718.png" class="" title="image-20220221123625718">

<h6 id="问题：是不是都要访问第一个"><a href="#问题：是不是都要访问第一个" class="headerlink" title="==问题：是不是都要访问第一个=="></a>==问题：是不是都要访问第一个==</h6><p>3、重新分配槽号</p>
<p>redis-cli –cluster reshard 192.168.220.128:6381    <strong>端口号应该为集群第一个</strong></p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221130922499.png" class="" title="image-20220221130922499">

<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220221131157781.png" class="" title="image-20220221131157781">



<p> 为6437设置从节点6388</p>
<p>命令：redis-cli –cluster add-node ip:新slave端口 ip:新master端口 –cluster-slave –cluster-master-id 新主机节点ID</p>
<p>redis-cli –cluster add-node 192.168.220.128:6388 192.168.220.128:6387 –cluster-slave –cluster-master-id e4781f644d4a4e4d4b4d107157b9ba8144631451——-这个是6387的编号，按照自己实际情况</p>
<h4 id="2-8主从缩容案"><a href="#2-8主从缩容案" class="headerlink" title="2.8主从缩容案"></a>2.8主从缩容案</h4><p>1、·     检查集群情况1获得6388的节点ID（最好是从从节点开始删除）</p>
<p>​               redis-cli  –cluster check 192.168.220.128:6382  </p>
<p>2、·     将6388删除 从集群中将4号从节点6388删除</p>
<p>命令：redis-cli –cluster del-node ip:从机端口 从机6388节点ID</p>
<p>3、检查</p>
<p>4.将6387的槽号清空，重新分配</p>
<p>  redis-cli  –cluster reshard 192.168.111.147:6381  </p>
<p>5、检查·     </p>
<p>6、将6387删除</p>
<p>命令：redis-cli –cluster del-node ip:端口 6387节点ID</p>
<h3 id="3-DockerFile解析"><a href="#3-DockerFile解析" class="headerlink" title="3.  DockerFile解析"></a>3.  DockerFile解析</h3><h4 id="前提了解"><a href="#前提了解" class="headerlink" title="前提了解"></a>前提了解</h4><p>1、是什么</p>
<p>·     Dockerfile是用来构建Docker镜像的文本文件，是由一条条构建镜像所需的指令和参数构成的脚本。</p>
<p>2.来源</p>
<p>·     <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
<p>3、·     构建三步骤</p>
<p>​     编写Dockerfile文件</p>
<p>  docker build命令构建镜像</p>
<p>·  docker run依镜像运行容器实例·     FROM</p>
<h4 id="1-DockerFile常用保留字指令"><a href="#1-DockerFile常用保留字指令" class="headerlink" title="1  DockerFile常用保留字指令"></a>1  DockerFile常用保留字指令</h4><p>·     基础镜像，当前新镜像是基于哪个镜像的，指定一个已经存在的镜像作为模板，第一条必须是from</p>
<p>·     MAINTAINER</p>
<p>·     镜像维护者的姓名和邮箱地址</p>
<p>·     RUN</p>
<p>·     容器构建时需要运行的命令</p>
<p>·     两种格式</p>
<p>·     shell格式</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image002-16454412566951.jpg" class="" title="graphic">

<p>RUN yum -y install vim</p>
<p>·     exec格式</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image004.jpg" class="" title="graphic">

<p>·     RUN是在 docker build时运行</p>
<p>·     EXPOSE</p>
<p>·     当前容器对外暴露出的端口</p>
<p>·     WORKDIR</p>
<p>·     指定在创建容器后，终端默认登陆的进来工作目录，一个落脚点</p>
<p>·     USER</p>
<p>·     指定该镜像以什么样的用户去执行，如果都不指定，默认是root</p>
<p>·     ENV</p>
<p>​      用来在构建镜像过程中设置环境变量·     ADD</p>
<p>·     将宿主机目录下的文件拷贝进镜像且会自动处理URL和解压tar压缩包</p>
<p>·     COPY</p>
<p>·     类似ADD，拷贝文件和目录到镜像中。 将从构建上下文目录中 &lt;源路径&gt; 的文件/目录复制到新的一层的镜像内的 &lt;目标路径&gt; 位置</p>
<p>·     COPY src dest</p>
<p>·     COPY [“src”, “dest”]</p>
<p>·     &lt;src源路径&gt;：源文件或者源目录</p>
<p>·     &lt;dest目标路径&gt;：容器内的指定路径，该路径不用事先建好，路径不存在的话，会自动创建。</p>
<p>·     VOLUME</p>
<p>·     容器数据卷，用于数据保存和持久化工作</p>
<p>·     CMD</p>
<p>·     指定容器启动后的要干的事情</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image002.gif" class="" title="graphic">

<p>·     注意</p>
<p>Dockerfile 中可以有多个 CMD 指令，但只有最后一个生效，CMD 会被 docker run 之后的参数替·     </p>
<p>它和前面RUN命令的区别</p>
<p> CMD是在docker run 时运行。</p>
<p>RUN是在 docker build时运行</p>
<p>·     ENTRYPOINT</p>
<p>·     也是用来指定一个容器启动时要运行的命令</p>
<p>·     类似于 CMD 指令，但是ENTRYPOINT不会被docker run后面的命令覆盖， 而且这些命令行参数会被当作参数送给 ENTRYPOINT 指令指定的程序</p>
<p>·     命令格式和案例说明</p>
<p>命令格式：<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image002-16454432138592.jpg" class="" title="graphic"></p>
<p>ENTRYPOINT可以和CMD一起用，一般是变参才会使用 CMD ，这里的 CMD 等于是在给 ENTRYPOINT 传参。</p>
<p>当指定了ENTRYPOINT后，CMD的含义就发生了变化，不再是直接运行其命令而是将CMD的内容作为参数传递给ENTRYPOINT指令，他两个组合会变成<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image003.jpg" class="" title="graphic"></p>
<p>案例如下：假设已通过 Dockerfile 构建了 nginx:test 镜像：</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/clip_image004-16454432138643.jpg" class="" title="graphic">

<table>
<thead>
<tr>
<th>是否传参</th>
<th>按照dockerfile编写执行</th>
<th>传参运行</th>
</tr>
</thead>
<tbody><tr>
<td>Docker命令</td>
<td>docker run   nginx:test</td>
<td>docker run   nginx:test -c /etc/nginx/new.conf</td>
</tr>
<tr>
<td>衍生出的实际命令</td>
<td>nginx -c  /etc/nginx/nginx.conf</td>
<td>nginx -c  /etc/nginx/new.conf</td>
</tr>
</tbody></table>
<p>·     优点</p>
<p>·     在执行docker run的时候可以指定 ENTRYPOINT 运行所需的参数。</p>
<p>·     注意</p>
<p>·     如果 Dockerfile 中如果存在多个 ENTRYPOINT 指令，仅最后一个生效。</p>
<h4 id="2、构建centos之dockerfile"><a href="#2、构建centos之dockerfile" class="headerlink" title="2、构建centos之dockerfile"></a>2、构建centos之dockerfile</h4><h4 id="3、虚悬镜像"><a href="#3、虚悬镜像" class="headerlink" title="3、虚悬镜像"></a>3、虚悬镜像</h4><p>定义：·     仓库名、标签都是<none>的镜像，俗称dangling image</p>
<p> 1、在系统中查看有误虚悬镜像</p>
<p>·     docker image ls -f dangling=true</p>
<p>2、删除</p>
<p>docker image prune</p>
<h3 id="4、docker-net"><a href="#4、docker-net" class="headerlink" title="4、docker net"></a>4、docker net</h3><p>这里简单说一下这三种网络模式</p>
<p>+<strong>+第一种：桥接模式</strong></p>
<p>使用桥接模式，虚拟机会获得与主机网络号相同的ip地址</p>
<p>优点：在相同网络号下，其他主机（不一定是主机）可以访问我的主机上的虚拟机</p>
<p>缺点：当同一网络下的主机很多时，会造成ip地址冲突（即ip地址不够用了）</p>
<p><strong>NAT</strong>：</p>
<p>NAT（Network Address Translator）是网络地址转换，它实现内网的IP地址与公网的地址之间的相互转换，将大量的内网IP地址转换为一个或少量的公网IP地址，减少对公网IP地址的占用</p>
<p> <strong>仅主机模式</strong></p>
<p>　　仅主机模式，是一种比NAT模式更加封闭的的网络连接模式，它将创建完全包含在主机中的专用网络</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220222141710681.png" class="" title="image-20220222141710681">

<h4 id="1、docker网络三大默认配置"><a href="#1、docker网络三大默认配置" class="headerlink" title="1、docker网络三大默认配置"></a>1、docker网络三大默认配置</h4><img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220222142057158.png" class="" title="image-20220222142057158">



<p>== <strong>问题：就是在host模式下我尝试启动两个tomcat</strong></p>
<p><strong>第一个可以第二个却不可以=</strong>=</p>
<h4 id="2、常用命令"><a href="#2、常用命令" class="headerlink" title="2、常用命令"></a>2、常用命令</h4><p>用法： docker network 参数</p>
<img src="/2022/02/23/docker%E9%AB%98%E7%BA%A7%E7%AF%87/image-20220222142639216.png" class="" title="image-20220222142639216">





<h3 id="四、docker-compose-容器编排"><a href="#四、docker-compose-容器编排" class="headerlink" title="四、docker compose 容器编排"></a>四、docker compose 容器编排</h3><h4 id="1、前提"><a href="#1、前提" class="headerlink" title="1、前提"></a>1、前提</h4><p>1、是什么</p>
<p>用于管理容器的，达到容器的统一管理</p>
<p>2、主要是通过编写docker compose yml文件来实现</p>
<p>3、下载</p>
<p>官网：<a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">Install Docker Compose | Docker Documentation</a></p>
<p>4、核心概念</p>
<p>一要素：docker-compose.yml</p>
<p>两服务：</p>
<p>服务（server）：一个个容器实例</p>
<p>项目（project）：一个个关联容器实例构成的完整义务单元</p>
<h4 id="2、compose使用三大步骤"><a href="#2、compose使用三大步骤" class="headerlink" title="2、compose使用三大步骤"></a>2、compose使用三大步骤</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/" class="post-title-link" itemprop="url">“docker基础篇”</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-22 12:38:42" itemprop="dateCreated datePublished" datetime="2022-02-22T12:38:42+08:00">2022-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-25 19:06:26" itemprop="dateModified" datetime="2022-02-25T19:06:26+08:00">2022-02-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、docker的基础概念"><a href="#一、docker的基础概念" class="headerlink" title="一、docker的基础概念"></a>一、docker的基础概念</h2><h3 id="1-1、docker为什么出现"><a href="#1-1、docker为什么出现" class="headerlink" title="1.1、docker为什么出现"></a>1.1、docker为什么出现</h3><p>为了使开发能够<code>平滑迁移</code>，就需要用到<code>容器虚拟化技术</code>。 源码+环境+配置+版本·打包形成一个镜像文件发送给docker引擎。在docker引擎上运行、</p>
<p>Docker是基于Go语言实现的云开源项目。</p>
<p>解决了运行环境和配置问题的软件容器，方便做持续集成并有助于整体发布的容器虚拟化技术</p>
<h3 id="1-2docker理念"><a href="#1-2docker理念" class="headerlink" title="1.2docker理念"></a>1.2docker理念</h3><p>一次镜像，处处运行，从搬家到搬楼。</p>
<p>对比：docker就跟VMware差不多</p>
<p>docker本身是一个容器运行载体或称之为管理引擎</p>
<h3 id="1-3-传统虚拟机和容器虚拟化技术的对比"><a href="#1-3-传统虚拟机和容器虚拟化技术的对比" class="headerlink" title="1.3  传统虚拟机和容器虚拟化技术的对比"></a>1.3  传统虚拟机和容器虚拟化技术的对比</h3><p>传统虚拟机技术，在硬件虚拟化，虚拟出一套硬件，运行一个完整的操作系统。</p>
<p>​                缺点：占用资源较大</p>
<p>docker容器虚拟化：在操作系统上虚拟化，直接服用本地主机的操作系统。</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219213414990.png" class="" title="image-20220219213414990">

<p> 每个容器互相隔离，每个容器都有一个自己的文件系统，互不影响。</p>
<h2 id="二、安装实操"><a href="#二、安装实操" class="headerlink" title="二、安装实操"></a>二、安装实操</h2><h4 id="1-三要素"><a href="#1-三要素" class="headerlink" title="1.三要素"></a>1.三要素</h4><p><strong>镜像(image)</strong></p>
<p>镜像就是一个只读的模板，可以通过这个模板创建容器服务，一个镜像可以创建多个容器</p>
<p><strong>容器(container)</strong></p>
<p>从面向对象角度：docker利用容器独立运行一个或一组应用（应用程序或服务运行在容器中）==容器类似于虚拟化的运行环境==，容器是用镜像创建的实例</p>
<p>从镜像容器角度：可以吧容器看做简易版的linux环境</p>
<p><strong>仓库(repository)</strong></p>
<p>是集中存放镜像的地方，分为公开仓库（public）和私有仓库（private）</p>
<p>最大的开放仓库是国外的 Docker Hub，存放了数量庞大的镜像供用户下载。</p>
<p>国内的公开仓库包括阿里云，网易云都有容器服务器（需要配置镜像加速）等</p>
<h4 id="2、docker架构图解"><a href="#2、docker架构图解" class="headerlink" title="2、docker架构图解"></a>2、docker架构图解</h4><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219232231115.png" class="" title="image-20220219232231115">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219234710057.png" class="" title="image-20220219234710057">

<p>​                                <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219234857731.png" class="" title="image-20220219234857731"></p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219234920827.png" class="" title="image-20220219234920827">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220219234952722.png" class="" title="image-20220219234952722">

<h4 id="3、kali中安装docker"><a href="#3、kali中安装docker" class="headerlink" title="3、kali中安装docker"></a>3、kali中安装docker</h4><p>我也不知道为什么按照Ubuntu的</p>
<p>官方 Ubuntu 存储库中提供的 Docker 安装软件包可能不是最新版本。</p>
<p>Ubuntu 官方的版本库中并不一定是 Docker 最新的安装包，为了保证是最新版，我们从 Docker 官方库来安装。</p>
<p>首先，更新现有的软件包列表：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br></pre></td></tr></table></figure>

<p>注意：如果无法更新，可能是你的软件源指向是国外的服务器，很可能已经被墙。所有首次更新请打开 VPN。</p>
<p>接下来，安装一些必备软件包，让 apt 通过 HTTPS 使用软件包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install apt-transport-https ca-certificates curl software-properties-common</span><br></pre></td></tr></table></figure>

<p>然后将官方 Docker 版本库的 GPG 密钥添加到系统中：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure>

<p>执行后显示</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OK</span><br></pre></td></tr></table></figure>

<p>将 Docker 版本库添加到APT源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu focal stable&quot;</span></span><br></pre></td></tr></table></figure>

<p>执行后显示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Get:1 https://download.docker.com/linux/ubuntu focal InRelease [36.2 kB]                                </span><br><span class="line">Hit:2 http://cn.archive.ubuntu.com/ubuntu focal InRelease                                               </span><br><span class="line">Get:3 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages [3056 B]</span><br><span class="line">Hit:4 http://cn.archive.ubuntu.com/ubuntu focal-updates InRelease</span><br><span class="line">Hit:5 http://cn.archive.ubuntu.com/ubuntu focal-backports InRelease</span><br><span class="line">Hit:6 http://cn.archive.ubuntu.com/ubuntu focal-security InRelease</span><br><span class="line">Fetched 39.2 kB <span class="keyword">in</span> 2s (16.1 kB/s)</span><br><span class="line">Reading package lists... Done</span><br></pre></td></tr></table></figure>

<p>接下来，我们用新添加的 Docker 软件包来进行升级更新。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<p>确保要从 Docker 版本库，而不是默认的 Ubuntu 版本库进行安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache policy docker-ce</span><br></pre></td></tr></table></figure>

<p>执行后会看到这样的结果（ Docker 的版本号可能略有不同）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker-ce:</span><br><span class="line">  Installed: (none)</span><br><span class="line">  Candidate: 5:19.03.12~3-0~ubuntu-focal</span><br><span class="line">  Version table:</span><br><span class="line">     5:19.03.12~3-0~ubuntu-focal 500</span><br><span class="line">        500 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br><span class="line">     5:19.03.11~3-0~ubuntu-focal 500</span><br><span class="line">        500 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br><span class="line">     5:19.03.10~3-0~ubuntu-focal 500</span><br><span class="line">        500 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br><span class="line">     5:19.03.9~3-0~ubuntu-focal 500</span><br><span class="line">        500 https://download.docker.com/linux/ubuntu focal/stable amd64 Packages</span><br></pre></td></tr></table></figure>

<p>请注意，到目前这一步<code>docker-ce</code>还未安装，但根据上一步中的列表，可以看到 docker-ce 来自 Docker 官方版本库。</p>
<p>最后，安装 Docker ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker-ce</span><br></pre></td></tr></table></figure>

<p>现在 Docker 已经安装完毕。我们启动守护程序。检查 Docker 是否正在运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status docker</span><br></pre></td></tr></table></figure>

<p>执行结果类似以下内容，说明该服务处于活动状态并且正在运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">● docker.service - Docker Application Container Engine</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Sat 2020-07-08 02:55:20 UTC; 5min ago</span><br><span class="line">TriggeredBy: ● docker.socket</span><br><span class="line">       Docs: https://docs.docker.com</span><br><span class="line">   Main PID: 4287 (dockerd)</span><br><span class="line">      Tasks: 8</span><br><span class="line">     Memory: 36.4M</span><br><span class="line">     CGroup: /system.slice/docker.service</span><br><span class="line">             └─4287 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br></pre></td></tr></table></figure>

<p>现在，安装 Docker 不仅可以为您提供 Docker 服务（守护程序），还可以为您提供<code>docker</code>命令行实用程序或 Docker 客户端。</p>
<h4 id="4、docker-常用命令"><a href="#4、docker-常用命令" class="headerlink" title="4、docker 常用命令"></a>4、docker 常用命令</h4><h5 id="4-1帮助启动命令"><a href="#4-1帮助启动命令" class="headerlink" title="4.1帮助启动命令"></a>4.1帮助启动命令</h5><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220122524466.png" class="" title="image-20220220122524466">

<h5 id="4-2镜像命令"><a href="#4-2镜像命令" class="headerlink" title="4.2镜像命令"></a>4.2镜像命令</h5><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220123045958.png" class="" title="image-20220220123045958">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220123356793.png" class="" title="image-20220220123356793">

<p><strong>docker search 镜像名称</strong></p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220123801777.png" class="" title="image-20220220123801777">

<p><strong>docker searched –limit 5（显示五个） 镜像名称</strong></p>
<p><strong>下载：docker pull</strong></p>
<p><strong><img src="%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220124246681.png" alt="image-20220220124246681"></strong><img src="%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220124402399.png" alt="image-20220220124402399"></p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220125320398.png" class="" title="image-20220220125320398">

<p><strong>删除镜像</strong></p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220130444387.png" class="" title="image-20220220130444387">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220131104155.png" class="" title="image-20220220131104155">

<h5 id="4-3-容器命令"><a href="#4-3-容器命令" class="headerlink" title="4.3 容器命令"></a>4.3 容器命令</h5><h6 id="新建容器加启动"><a href="#新建容器加启动" class="headerlink" title="新建容器加启动"></a>新建容器加启动</h6><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220132509422.png" class="" title="image-20220220132509422">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220132700918.png" class="" title="image-20220220132700918">

<p>!(D:\boke\source_posts\web入门\image-20220220133259866.png)</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220133354808.png" class="" title="image-20220220133354808">

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -it --name 名字</span><br></pre></td></tr></table></figure>



<h6 id="列出所有运行的容器"><a href="#列出所有运行的容器" class="headerlink" title="列出所有运行的容器"></a>列出所有运行的容器</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220134811827.png" class="" title="image-20220220134811827">



<h6 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h6><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220142418745.png" class="" title="image-20220220142418745">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220142659521.png" class="" title="image-20220220142659521">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220150221028.png" class="" title="image-20220220150221028">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220150426630.png" class="" title="image-20220220150426630">

<ul>
<li><strong>后台启动容器</strong></li>
</ul>
<p>Plain  Text</p>
<p>docker run -d 容器名 </p>
<p><strong>问题</strong>：后台启动容器，再用 docker ps 查看发现容器停止</p>
<p><strong>原因</strong>：docker 容器使用后台运行，就必须有一个前台进程；如果仅仅后台启动，没有应用来提供服务，就会自动停止</p>
<ul>
<li><strong>查看日志</strong></li>
</ul>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image.png" class="" title="image">

<ul>
<li><strong>查看容器中的进程</strong></li>
</ul>
<p>Plain  Text</p>
<p>docker top 容器ID</p>
<ul>
<li><strong>查看镜像元素</strong></li>
</ul>
<p>Plain  Text</p>
<p>docker ispect 容器ID</p>
<ul>
<li><strong>进入当前正在运行的容器</strong></li>
</ul>
<p>容器通常都是使用后台方式运行的，这时候可能需要进入容器，修改一些配置</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image(1).png" class="" title="image(1)">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220154903141.png" class="" title="image-20220220154903141">

<ul>
<li><strong>从容器内拷贝文件到主机</strong></li>
</ul>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220155820720.png" class="" title="image-20220220155820720">

<p>docker cp 容器id:容器内路径 目的主机路径</p>
<h6 id="导出容器"><a href="#导出容器" class="headerlink" title="导出容器"></a>导出容器</h6><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220160033405.png" class="" title="image-20220220160033405">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220160201763.png" class="" title="image-20220220160201763">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220220160546360.png" class="" title="image-20220220160546360">

<h4 id="5、docker镜像"><a href="#5、docker镜像" class="headerlink" title="5、docker镜像"></a>5、docker镜像</h4><p><strong>什么是镜像</strong></p>
<p><strong>镜像</strong>是一种轻量级，可执行的软件包，用来打包软件运行环境和基于运行软件开发的软件，它包含运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</p>
<p>所有的应用，直接打包成docker镜像，就可以直接跑起来.</p>
<h2 id="三、commit命令"><a href="#三、commit命令" class="headerlink" title="三、commit命令"></a>三、commit命令</h2><p>在docker中添加功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install 需要的功能</span><br></pre></td></tr></table></figure>



<p><strong>是什么</strong>：·     docker commit提交容器副本使之成为一个新的镜像（也就是说让我们的容器成为镜像）</p>
<p>==生成镜像有两种方法：一种用docke==</p>
<p>==dockerfile一种用commit==</p>
<p><strong>用法</strong>：·     docker commit -m=”提交的描述信息” -a=”作者” 容器ID 要创建的目标镜像名:[标签名]</p>
<h2 id="四、将镜像推送到腾讯云（之前注册有了）"><a href="#四、将镜像推送到腾讯云（之前注册有了）" class="headerlink" title="四、将镜像推送到腾讯云（之前注册有了）"></a>四、将镜像推送到腾讯云（之前注册有了）</h2><p><em><strong>*1、添加容器*</strong></em></p>
<p>打开腾讯云控制台，在上方菜单栏 加号图标 选择容器服务，如图：</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWxpdXlhbmc=,size_16,color_FFFFFF,t_70.png" class="" title="img">

<p>这样上方菜单就会显示出容器服务。</p>
<p><em><strong>*2、开通镜像服务*</strong></em></p>
<p>选择容器服务，浏览器左侧菜单会显示与容器服务相关的导航菜单，点击“<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E9%95%9C%E5%83%8F&spm=1001.2101.3001.7020">镜像</a>仓库”下面的“我的镜像”，会提示开通镜像服务，根据提示输入仓库密码。这个密码用来登录镜像仓库，到后面会用到。</p>
<p><em><strong>*3、创建命名空间*</strong></em></p>
<p>在“我的镜像”里面创建命名空间，如图：</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWxpdXlhbmc=,size_16,color_FFFFFF,t_70-16457180748391.png" class="" title="img">

<p><em><strong>*4、创建镜像仓库*</strong></em></p>
<p>在“我的镜像”一栏里面继续创建镜像仓库，命名空间选择上一步创建的即可。创建成功之后，如图：</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWxpdXlhbmc=,size_16,color_FFFFFF,t_70-16457180748392.png" class="" title="img">

<p><em><strong>*5、推送镜像*</strong></em></p>
<p> 点击进入镜像仓库，可以看到列表是空的，说明没有镜像文件，列表左上角有一个按钮“使用指引”，里面可以看到 登录到镜像，拉取镜像和推送镜像的相关命令，如图：</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ppYWxpdXlhbmc=,size_16,color_FFFFFF,t_70-16457182495466.png" class="" title="img">



<h2 id="五、将本地镜像推送到私有仓库"><a href="#五、将本地镜像推送到私有仓库" class="headerlink" title="五、将本地镜像推送到私有仓库"></a>五、将本地镜像推送到私有仓库</h2><p>·     下载镜像Docker Registry</p>
<p>docker pull registry </p>
<p>​             <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002328063.png" class="" title="image-20220225002328063">                  </p>
 <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002334191.png" class="" title="image-20220225002334191">

<p>·     运行私有库Registry，相当于本地有个私有Docker hub</p>
<p>docker run -d -p 5000:5000 -v /zzyyuse/myregistry/:/tmp/registry –privileged=true registry</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002352418.png" class="" title="image-20220225002352418">

<p>默认情况，仓库被创建在容器的/var/lib/registry目录下，建议自行用容器卷映射，方便于宿主机联调</p>
<p>·     curl验证私服库上有什么镜像</p>
<p> curl -XGET <a target="_blank" rel="noopener" href="http://192.168.111.162:5000/v2/_catalog">http://192.168.111.162:5000/v2/_catalog</a></p>
<p>可以看到，目前私服库没有任何镜像上传过。。。。。。</p>
 <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002540154.png" class="" title="image-20220225002540154">

<p>​                               </p>
<p>·     将新镜像zzyyubuntu:1.2修改符合私服规范的Tag</p>
<p> <strong>==  按照公式： docker  tag  镜像:Tag  Host:Port/Repository:Tag</strong></p>
<p><strong>自己host主机IP地址，填写同学你们自己的，不要粘贴错误，O(∩_∩)O</strong></p>
<p><strong>使用命令 docker tag 将zzyyubuntu:1.2 这个镜像修改为192.168.111.162:5000/zzyyubuntu:1.2</strong></p>
<p>docker tag zzyyubuntu:1.2 192.168.111.162:5000/zzyyubuntu:1.2</p>
 <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002656354.png" class="" title="image-20220225002656354">

<p>·     修改配置文件使之支持http</p>
<p> vim命令新增如下下面一行：vim /etc/docker/daemon.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;     &quot;registry-mirrors&quot;:  [&quot;https://aa25jngu.mirror.aliyuncs.com&quot;],     &quot;insecure-registries&quot;: [&quot;192.168.111.162:5000&quot;]  &#125;  </span><br></pre></td></tr></table></figure>





<p>上述理由：docker默认不允许http方式推送镜像，通过配置选项来取消这个限制。====&gt; 修改完后如果不生效，建议重启docker</p>
<p>·     push推送到私服库</p>
<p>docker push 192.168.111.162:5000/zzyyubuntu:1.2</p>
 <img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225002910558.png" class="" title="image-20220225002910558">

<p>​                               </p>
<h2 id="六、容器数据卷"><a href="#六、容器数据卷" class="headerlink" title="六、容器数据卷"></a>六、容器数据卷</h2><p>为什么：</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225124329751.png" class="" title="image-20220225124329751">

<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225124603527.png" class="" title="image-20220225124603527">

<p><strong>特点：</strong></p>
<p>==<strong>1：数据卷可在容器之间共享或重用数据</strong>==</p>
<p><strong>2：卷中的更改可以直接实时生效，爽</strong></p>
<p><strong>3：数据卷中的更改不会包含在镜像的更新中</strong></p>
<p><strong>4：数据卷的生命周期一直持续到没有容器使用它为止</strong></p>
<p><strong>5、docker在删除容器时不会删除挂载的数据卷</strong></p>
<h4 id="2、容器挂载实例"><a href="#2、容器挂载实例" class="headerlink" title="2、容器挂载实例"></a>2、容器挂载实例</h4><img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225130616698.png" class="" title="image-20220225130616698">



<p>可以发现对应宿主机的文件夹上了有了对应文件</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225130708088.png" class="" title="image-20220225130708088">

<p>查看容器挂载情况</p>
<p>命令：docker inspect id</p>
<img src="/2022/02/22/%E2%80%9Cdocker%E5%9F%BA%E7%A1%80%E7%AF%87%E2%80%9D/image-20220225131633870.png" class="" title="image-20220225131633870">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/22/%E6%88%91%E4%B8%8Enginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/22/%E6%88%91%E4%B8%8Enginx/" class="post-title-link" itemprop="url">我与nginx</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-02-22 12:28:29 / 修改时间：12:29:53" itemprop="dateCreated datePublished" datetime="2022-02-22T12:28:29+08:00">2022-02-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="一、-什么是nginx"><a href="#一、-什么是nginx" class="headerlink" title="一、==什么是nginx=="></a>一、==什么是nginx==</h2><p>nginx是一种高性能的http和可以实现反向代理功能的服务器（简单说就是一种服务器），</p>
<p>它的优点是：占用内存少，并发能力强，性能强，理论上nginx的最大并发数可达50000.</p>
<h2 id="二、-nginx可以实现的功能"><a href="#二、-nginx可以实现的功能" class="headerlink" title="二、==nginx可以实现的功能=="></a>二、==nginx可以实现的功能==</h2><h3 id="1、正向代理："><a href="#1、正向代理：" class="headerlink" title="1、正向代理："></a>1、正向代理：</h3><p>所谓正向代理：我们将我们的请求不直接发往目的地，而是发往代理服务器，再由服务器去访问我们的目的地。换句话就是（==<strong>正向代理是代理客户端（浏览器等），隐藏客户端的ip地址</strong>==）</p>
<p>vpn：好像就是代理实现的</p>
<h3 id="2、反向代理"><a href="#2、反向代理" class="headerlink" title="2、反向代理"></a>2、反向代理</h3><p>nginx可以作为反向代理服务器，首先客户端的访问请求发往反向代理服务器，再用反向代理服务器将客户的访问请求发往真实的服务器（==简单来说就是反向代理代理的是服务器端，可以隐藏服务器的真实地址，暴露的仅仅是反向代理服务器的地址==）</p>
<h3 id="3、负载均衡"><a href="#3、负载均衡" class="headerlink" title="3、负载均衡"></a>3、负载均衡</h3><p>简单来说就就是：负载均衡服务器将成千上万的用户请求均衡的分发到服务器中，避免因为请求过多造成单个服务器崩溃。（此时一般会有很多个服务器）</p>
<h3 id="4、动静分离"><a href="#4、动静分离" class="headerlink" title="4、动静分离"></a>4、动静分离</h3><p>为加快网页的解析速度，将动态网页和静态网页分开由不同的服务器负责，这样还可以减轻单个服务器的压力。</p>
<p>在视频中提到的前后端：</p>
<p>==<strong>Html+CSS+JS，都是在浏览器端执行，统一称之为前端</strong>==（一般也将浏览器端称为前端）。==而Java，C，Python，PHP这些可以运行在服务器端的，统一称之为后端==</p>
<h2 id="三、Nginx在kali中安装过程"><a href="#三、Nginx在kali中安装过程" class="headerlink" title="三、Nginx在kali中安装过程"></a>三、Nginx在kali中安装过程</h2><p>前提： nginx的安装需要许多依赖，如，pcre库，</p>
<h3 id="1、PCRE库的安装"><a href="#1、PCRE库的安装" class="headerlink" title="1、PCRE库的安装"></a>1、PCRE库的安装</h3><p>1、首先去到pcre官网<a target="_blank" rel="noopener" href="http://www.pcre.org/%E5%8E%BB%E4%B8%8B%E8%BD%BDPCRE%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%8C%85%EF%BC%88%E5%9C%A8window%E4%B8%8A%E4%B8%8B%E8%BD%BD%E5%A5%BD%E7%9B%B4%E6%8E%A5%E6%8B%96%E5%85%A5%E5%88%B0linux%E4%B8%AD%EF%BC%89">http://www.pcre.org/去下载PCRE的压缩包（在window上下载好直接拖入到linux中）</a></p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220215214632184.png" class="" title="image-20220215214632184">

<p>2、解压（<strong>由于是zip，所以用到unzip解压</strong>，如果是tar则用tar命令）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip -d /home  pcre-8.45.zip  //将解压到home目录下</span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220215214914937.png" class="" title="image-20220215214914937">

<p>3、进行配置、编译安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/pcre-8.48       进入到这个目录</span><br><span class="line">./configure            进行配置           </span><br><span class="line">make&amp;&amp;make install          进行编译安装</span><br></pre></td></tr></table></figure>



<p>4、检查</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pcre-config --version      检查版本用来验证安装是否成功</span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220215220516625.png" class="" title="image-20220215220516625">



<h3 id="2、OpenSSL库的安装"><a href="#2、OpenSSL库的安装" class="headerlink" title="2、OpenSSL库的安装"></a>2、OpenSSL库的安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home   转到home目录</span><br><span class="line">wget http://www.openssl.org/source/openssl-3.0.1.tar.gz  下载安装包</span><br><span class="line">tar -zxvf openssl-3.0.1.tar.gz         这里因为是tar包</span><br></pre></td></tr></table></figure>

<p>、进行配置、编译安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/opsenssl       进入到这个目录  我改了名字</span><br><span class="line">./config         进行配置           </span><br><span class="line">make&amp;&amp;make install          进行编译安装</span><br></pre></td></tr></table></figure>

<h3 id="3、zlib库安装"><a href="#3、zlib库安装" class="headerlink" title="3、zlib库安装"></a>3、zlib库安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home   转到home目录</span><br><span class="line">wget http://www.zlib.net/zlib-1.2.3.tar.gz  下载安装包</span><br><span class="line">tar -zxvf openssl-3.0.1.tar.gz         这里因为是tar包  这个命令还不是很瘦</span><br></pre></td></tr></table></figure>

<p>、进行配置、编译安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home/zlib       进入到这个目录  我改了名字</span><br><span class="line">./config         进行配置           </span><br><span class="line">make&amp;&amp;make install          进行编译安装</span><br></pre></td></tr></table></figure>



<h3 id="4、nginx的安装（kali中也自带有nginx）"><a href="#4、nginx的安装（kali中也自带有nginx）" class="headerlink" title="4、nginx的安装（kali中也自带有nginx）"></a>4、nginx的安装（kali中也自带有nginx）</h3><p>1、安装命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://nginx.org/download/nginx-1.21.6.tar.gz</span><br><span class="line">在linux中通过这个命令下载的安装包会在root目录</span><br><span class="line">tar—zxvf nginx-1.21.6.tar.gz     解压</span><br><span class="line">cd nginx-1.21.6.tar.gz</span><br><span class="line">./config                 配置</span><br><span class="line">make&amp;&amp;make install            编译安装</span><br></pre></td></tr></table></figure>

<p>== <strong>在我们彻底安装成功后，在usr会多出来一个文件夹/local/nginx，在/nginx中有/sbin，其中有启动脚本</strong>== </p>
<h2 id="四、Nginx操作的常用命令"><a href="#四、Nginx操作的常用命令" class="headerlink" title="四、Nginx操作的常用命令"></a>四、Nginx操作的常用命令</h2><p>前提条件——一定要进入Nginx的目录中去使用：<code>/usr/local/nginx/sbin</code>。<strong>（因为没有配置好环境变量）</strong></p>
<ul>
<li>查看Nginx的版本号：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -v</span><br></pre></td></tr></table></figure>

<ul>
<li>启动Nginx：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>关闭Nginx：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure>

<ul>
<li>重新加载Nginx：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure>

<h2 id="五、nginx的配置文件"><a href="#五、nginx的配置文件" class="headerlink" title="五、nginx的配置文件"></a>五、nginx的配置文件</h2><h3 id="1、Nginx配置文件位置"><a href="#1、Nginx配置文件位置" class="headerlink" title="1、Nginx配置文件位置"></a>1、Nginx配置文件位置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure>

<h3 id="2、-Nginx配置文件组成"><a href="#2、-Nginx配置文件组成" class="headerlink" title="2、 Nginx配置文件组成"></a>2、 Nginx配置文件组成</h3><p>分为三部分：</p>
<h4 id="1、全局块"><a href="#1、全局块" class="headerlink" title="1、全局块"></a>1、全局块</h4><p>从配置文件开始到<code>events</code>块之间的内容； 主要会设置一些<code>影响Nginx服务器整体运行的配置指令</code>； ~~~</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 1`：是工作进程的意思 work_processes值越大，可以支持的并发处理越多</span><br></pre></td></tr></table></figure>

<h4 id="2、-events块"><a href="#2、-events块" class="headerlink" title="2、 events块"></a>2、 events块</h4><p>涉及的指令主要影响==Nginx服务器与用户的网络连接==</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`worker_connections 1024`：支持的最大连接数。</span><br></pre></td></tr></table></figure>

<h4 id="3、-http块"><a href="#3、-http块" class="headerlink" title="3、 http块"></a>3、 http块</h4><p>Nginx服务器配置中最频繁的部分；http块又包含http全局块，sever块，location块</p>
<h5 id="1、http全局块"><a href="#1、http全局块" class="headerlink" title="1、http全局块"></a>1、http全局块</h5><p>配置的指令包括文件引入，MIME-TYPE定义，日志自定义，连接超时时间，单链接请求数上限2、</p>
<h5 id="2、server块"><a href="#2、server块" class="headerlink" title="2、server块"></a>2、server块</h5><p>这块与虚拟机有关，每个http块可以包含多个server块，每个server块相当于一个虚拟机</p>
<p>每个sever块又分为<strong>全局server块</strong>和<strong>location块</strong></p>
<h6 id="全局server块"><a href="#全局server块" class="headerlink" title="全局server块"></a>全局server块</h6><p>虚拟主机的监听配置和虚拟主机的名称和ip配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">       listen       80;       监听端口</span><br><span class="line">       server_name  localhost;  服务名称</span><br><span class="line"></span><br><span class="line">       #charset koi8-r;</span><br><span class="line"></span><br><span class="line">       #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="location块-路径"><a href="#location块-路径" class="headerlink" title="location块  路径"></a>location块  路径</h6><p>基于nginx服务器接受到的请求字符串</p>
<h2 id="六、nginx的配置实例-反向代理"><a href="#六、nginx的配置实例-反向代理" class="headerlink" title="六、nginx的配置实例 反向代理"></a>六、nginx的配置实例 反向代理</h2><p>实现效果：<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219115802802.png" class="" title="image-20220219115802802"></p>
<h4 id="1、安装好tomcat"><a href="#1、安装好tomcat" class="headerlink" title="1、安装好tomcat"></a>1、安装好tomcat</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">下载好tomca的安装包</span><br><span class="line">tar-zxvf apache-tomcat-8.5.75        （</span><br><span class="line">java -version      检查jdk环境，tomcat依赖jdk</span><br><span class="line">cd /apache-tomcat-8.5.75/bin           进入到对于目录下的bin目录执行启动命令</span><br><span class="line">./startup.sh                    启动tomcat</span><br><span class="line">cd log/                 进入到日志来检查tomcat是否正常启动</span><br><span class="line">tail -f catalina.out </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220218232313795.png" class="" title="image-20220218232313795">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220218232234248.png" class="" title="image-20220218232234248">

<h4 id="2、对端口的准备工作"><a href="#2、对端口的准备工作" class="headerlink" title="2、对端口的准备工作"></a>2、对端口的准备工作</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --add-port=8080/tcp --permanent     对外开放端口</span><br><span class="line"> firewall-cmd --reload               重载</span><br><span class="line">#查看已经开放的端口号</span><br><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure>

<h4 id="3、Firewalls的有关命令"><a href="#3、Firewalls的有关命令" class="headerlink" title="3、Firewalls的有关命令"></a>3、Firewalls的有关命令</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld      启动</span><br><span class="line">systemctl status firewalld     查看状态</span><br><span class="line"> systemctl disable firewalld   禁止开机启动</span><br><span class="line">systemctl enable firewalld.service  设置开机启动</span><br><span class="line">systemctl stop firewalld.            关机</span><br></pre></td></tr></table></figure>

<h4 id="4、在linux浏览器中输入IP加端口号"><a href="#4、在linux浏览器中输入IP加端口号" class="headerlink" title="4、在linux浏览器中输入IP加端口号"></a>4、在linux浏览器中输入IP加端口号</h4><img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219115626396.png" class="" title="image-20220219115626396">

<h4 id="5、实现在window上输入www-123com访问tomcat"><a href="#5、实现在window上输入www-123com访问tomcat" class="headerlink" title="5、实现在window上输入www.123com访问tomcat"></a>5、实现在window上输入<a target="_blank" rel="noopener" href="http://www.123com访问tomcat/">www.123com访问tomcat</a></h4><p>具体配置：</p>
<p>1.在windows系统的host文件进行域名和ip对应关系的配置</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219120200395.png" class="" title="image-20220219120200395">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219120453759.png" class="" title="image-20220219120453759">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219120751346.png" class="" title="image-20220219120751346">



<p>2、在nginx中配置请求</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219121254723.png" class="" title="image-20220219121254723">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219121637652.png" class="" title="image-20220219121637652">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219132705972.png" class="" title="image-20220219132705972">



<p>注意：需要关闭防火墙才可以：？</p>
<h2 id="七、反向代理2"><a href="#七、反向代理2" class="headerlink" title="七、反向代理2"></a>七、反向代理2</h2><p>实现效果：</p>
<p>1、在usr创建8080和8081文件，并下载tomcat</p>
<p>2、使用命令停掉之前的tomcat</p>
   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep tomcat</span><br><span class="line">kill -g  号数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219193252179.png" class="" title="image-20220219193252179">

<p>3、修改配置文件</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/8081/apache-tomcat-8.5.75/conf</span><br><span class="line">vim server.xml</span><br><span class="line">修改端口号</span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219194048304.png" class="" title="image-20220219194048304">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219194111089.png" class="" title="image-20220219194111089">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219194154993.png" class="" title="image-20220219194154993">

<p>​            其他几个端口是为了避免与8080那个一样造成冲突</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219194449678.png" class="" title="image-20220219194449678">

<p>4、创建文件夹和测试文件</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/8080/apache-tomcat-8.5.75/webapps/  创建etc</span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219195514959.png" class="" title="image-20220219195514959">

<p>同理对8081</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219200201879.png" class="" title="image-20220219200201879">

<p>7、对nginx配置修改</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219200311056.png" class="" title="image-20220219200311056">

<p>8、测试</p>
<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219202127730.png" class="" title="image-20220219202127730">

<img src="/2022/02/22/%E6%88%91%E4%B8%8Enginx/image-20220219202142296.png" class="" title="image-20220219202142296">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/" class="post-title-link" itemprop="url">“web爆破题”</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-22 12:11:19" itemprop="dateCreated datePublished" datetime="2022-02-22T12:11:19+08:00">2022-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-23 13:47:46" itemprop="dateModified" datetime="2022-02-23T13:47:46+08:00">2022-02-23</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="web21-简单爆破题目"><a href="#web21-简单爆破题目" class="headerlink" title="web21 简单爆破题目"></a>web21 简单爆破题目</h3><p>1、打开题目发现有登入页面，随便输入利用burpsuit抓包</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220215232138761-16455952610621.png" class="" title="image-20220215232138761">

<p>2、</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220215232234001-16455952610632.png" class="" title="image-20220215232234001">

<p>3、<strong>开始进行爆破</strong></p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216101318948-16455952610633.png" class="" title="image-20220216101318948">

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216105533915-16455952610634.png" class="" title="image-20220216105533915">

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216110919730-16455952610645.png" class="" title="image-20220216110919730">



<h3 id="wweb22子域名爆破"><a href="#wweb22子域名爆破" class="headerlink" title="wweb22子域名爆破"></a>wweb22子域名爆破</h3><p>1、根据题目提示，利用在线子域名爆破工具</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216111442818-16455952610646.png" class="" title="image-20220216111442818">

<p>2、查到这些域名<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216111755875-16455952610647.png" class="" title="image-20220216111755875"></p>
<p>3、将光标放到标签就可以看到</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216111848270-16455952610648.png" class="" title="image-20220216111848270">



<h3 id="web23脚本"><a href="#web23脚本" class="headerlink" title="web23脚本"></a>web23脚本</h3><p>1、分析代码</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216121245382-16455952610649.png" class="" title="image-20220216121245382">

<p>2、利用在线工具写一个简单的php脚本</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>;<span class="variable">$i</span>&lt;<span class="number">1000</span>;<span class="variable">$i</span>++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="variable">$token</span>=md5(<span class="variable">$i</span>);</span><br><span class="line">	<span class="keyword">if</span>(substr(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>)===substr(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>) &amp;&amp; substr(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>) ===substr(<span class="variable">$token</span>, <span class="number">17</span>,<span class="number">1</span>))</span><br><span class="line">	&#123; <span class="keyword">if</span>((intval(substr(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>))+intval(substr(<span class="variable">$token</span>, <span class="number">14</span>,<span class="number">1</span>))+substr(<span class="variable">$token</span>, <span class="number">17</span>,<span class="number">1</span>))/substr(<span class="variable">$token</span>, <span class="number">1</span>,<span class="number">1</span>)===intval(substr(<span class="variable">$token</span>, <span class="number">31</span>,<span class="number">1</span>)))</span><br><span class="line">	    &#123;  <span class="keyword">echo</span><span class="string">&#x27;token=&#x27;</span>.<span class="variable">$i</span>.<span class="string">&#x27;md5=&#x27;</span>.<span class="variable">$token</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216124425154-164559526106410.png" class="" title="image-20220216124425154">



<h3 id="web24"><a href="#web24" class="headerlink" title="web24"></a>web24</h3><p>1、</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216222924227-164559526106411.png" class="" title="image-20220216222924227">

<p>2、写php代码</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216223056921-164559526106412.png" class="" title="image-20220216223056921">

<p>3、传参</p>
<h3 id="web25"><a href="#web25" class="headerlink" title="web25"></a>web25</h3><p>1、分析代码</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216230633443-164559526106413.png" class="" title="image-20220216230633443">

<p>2、关键点</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216230752637-164559526106414.png" class="" title="image-20220216230752637">

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216231535774-164559526106415.png" class="" title="image-20220216231535774">







<p>3、**==考点；这里我们需要根据得到的第一个随机数推导出他的种子seed==**</p>
<p><strong>在这里我们需要用到一个工具：<code>php_mt_seed</code> 官网下载地址：<a target="_blank" rel="noopener" href="https://www.openwall.com/php_mt_seed/">https://www.openwall.com/php_mt_seed/</a></strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd php_mt_seed-<span class="number">4.0</span>   进入到目录下</span><br><span class="line">   </span><br><span class="line">make            安装，不然后面的命令执行不了</span><br><span class="line">time ./php_mt_seed <span class="number">1937331282</span>   执行</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216233250673-164559526106516.png" class="" title="image-20220216233250673">

<p>4、</p>
<p>写php代码</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220216234711030-164559526106517.png" class="" title="image-20220216234711030">



<p>5、<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/%E4%B8%8B%E8%BD%BD-164559526106518.png" class="" title="下载"></p>
<h3 id="web26-可以爆破也可以看代码"><a href="#web26-可以爆破也可以看代码" class="headerlink" title="web26  可以爆破也可以看代码"></a>web26  可以爆破也可以看代码</h3><p>我的做法：不知道因为是做过了原因还是题目问题，我发现在登入页面直接点安装，发现连接数据库成功，所以我就抓个包，然后重发就得到了flag</p>
<p>参考做法：对密码进行爆破</p>
<p>1、</p>
<h3 id="web27"><a href="#web27" class="headerlink" title="web27"></a>web27</h3><p>1、</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220217093137640-164559526106519.png" class="" title="image-20220217093137640">

<p>2、进行对生日爆破</p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220217093826577-164559526106520.png" class="" title="image-20220217093826577">

<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220217113306275-164559526106521.png" class="" title="image-20220217113306275">

<p><strong>注意：爆破时线程开低点</strong></p>
<img src="/2022/02/22/%E2%80%9Cweb%E7%88%86%E7%A0%B4%E9%A2%98%E2%80%9D/image-20220217113657092-164559526106522.png" class="" title="image-20220217113657092">



<h3 id="web28"><a href="#web28" class="headerlink" title="web28"></a>web28</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/21/web%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/21/web%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">web入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-01-21 20:46:31" itemprop="dateCreated datePublished" datetime="2022-01-21T20:46:31+08:00">2022-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-01-22 13:46:27" itemprop="dateModified" datetime="2022-01-22T13:46:27+08:00">2022-01-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="web入门2"><a href="#web入门2" class="headerlink" title="web入门2"></a>web入门2</h4><p>因为提示看不了源码（右键和F12都看不了），然后试着用burpsuit抓包一下，就可以了</p>
<p>其他方法：1、换协议：URL中直接加入view-source:</p>
<p>​                    2、直接利用开发者工具也可以</p>
<p>​                     3.在开发者工具中利用network</p>
<h4 id="web3"><a href="#web3" class="headerlink" title="web3"></a>web3</h4><p>熟悉的抓包就可以了</p>
<h4 id="web4"><a href="#web4" class="headerlink" title="web4"></a>web4</h4><p>看了提示robots，做过类似的题，robots是机器人协议</p>
<p>直接看robots.txt，然后发现有一个flagishere.txt文件不允许访问</p>
<h4 id="web5"><a href="#web5" class="headerlink" title="web5"></a>web5</h4><p>题目提示是phps源码泄露，我好像之前做过类似的php 和phps题目</p>
<p>然后试着在URL中输入index.php中发现会有一个下载文件</p>
<h4 id="web6"><a href="#web6" class="headerlink" title="web6"></a>web6</h4><p>这题刚看到提示的时候试着用御剑扫描，不知道是我用的字典问题还是什么，什么都没扫出来</p>
<p>然后看到了教程，说可以用dirsearch扫描或者直接在URL后加<a target="_blank" rel="noopener" href="http://www.zip(这里我也不知道为什么,查了资料也没有说的)/">www.zip（这里我也不知道为什么，查了资料也没有说的）</a></p>
<p>然后会下载zip，有两个文件，index.php提示在fl000g.txt里，但是直接访问是不可以的（因为我们下载的zip是别人修改过的，所以需要我们在网页中查看那个fl000g.txt</p>
<p>补充知识：<a href="http://www.zip:网站的文件都是放置在www文件夹下面的,WWW文件夹里面的文件全部压缩在[www.zip](http://www.zip)里面了。">www.zip:网站的文件都是放置在www文件夹下面的,WWW文件夹里面的文件全部压缩在[www.zip](http://www.zip)里面了。</a></p>
<h4 id="web7"><a href="#web7" class="headerlink" title="web7"></a>web7</h4><p>不知道版本控制是什么啊，试着抓了个包，发现什么都没有。</p>
<p>==补充知识==：</p>
<p>​               版本控制器泄露有两种：</p>
<h5 id="一种是git泄露："><a href="#一种是git泄露：" class="headerlink" title="一种是git泄露："></a>一种是git泄露：</h5><p>​                           git文件是开发人员在开发过程中使用 Git(分布式版本控制系统)做开发时产生的隐藏目录，该文件包含一些版本信息和网站源码，数据库信息等敏感信息</p>
<p> 1、通常开发人员在开发时，通常将源码提交到远程的托管网站（如Github）方便管理与交互，等到开发最后阶段，再将源码从远程服务器上下载到 web 目录下， 如果开发人员忘记将其中的 .git文件删除，则可以通过 .git文件恢复网站源码，来获取一些敏感信息；<br>2、开发人员对站点使用 Git 对版本进行控制，实现自动部署，如果配置不当，直接将 .git文件加载到线上环境，这样便引起了.git文件泄露。</p>
<h5 id="另外一种是svn"><a href="#另外一种是svn" class="headerlink" title="另外一种是svn"></a>另外一种是svn</h5><p>SVN（subversion）是程序员常用的源代码版本管理软件。在使用 SVN 管理本地代码过程中，使用 svn checkout 功能来更新代码时，项目目录下会自动生成隐藏的<code>.svn</code>文件夹</p>
<p>==造成SVN源代码漏洞的主要原因==是管理员操作不规范，一些网站管理员在发布代码时，不愿意使用“导出”功能，而是直接复制代码文件夹到WEB服务器上（直接将.svn文件复制到了外网环境），这就使得<code>.svn</code>隐藏文件夹被暴露于外网环境，黑客对此可进一步利用：</p>
<p>1、在 svn1.6 及以前版本会在项目的每个文件夹下都生成一个.svn文件夹，里面包含了所有文件的备份，文件名为 .svn/text-base/文件名.svn-base ；</p>
<p>2、在 svn1.7 及以后版本则只在项目根目录生成一个.svn文件夹，里面的pristine文件夹里包含了整个项目的所有文件备份。</p>
<p>然后直接在URL中输入/.git  就可以了</p>
<h4 id="web8"><a href="#web8" class="headerlink" title="web8"></a>web8</h4><p>同样的提示，试着/.git 不行，那只能是另外一种了，</p>
<h4 id="web9"><a href="#web9" class="headerlink" title="web9"></a>web9</h4><p>vim在编辑文档的过程中如果异常退出，会产生缓存文件，第一次产生的缓存文件后缀为.swp，后面会产生swo等.</p>
<p>文中提示异常退出，所以直接在URL中输入index.php.swp</p>
<h4 id="web10"><a href="#web10" class="headerlink" title="web10"></a>web10</h4><p>题目提示是cookie，做过类似的题，直接抓包就可以了</p>
<p>看了答案才发现，抓包的flag经过了URL加密，但是我直接复制未解密的也可以，原来是因为已经做出的题目无论提交什么都是对的。。。。。。。。。。。。。</p>
<h4 id="web11"><a href="#web11" class="headerlink" title="web11"></a>web11</h4><p>第一次做到有关域名的题，，题目提示ctfshow.com有隐藏信息，直接利用<a target="_blank" rel="noopener" href="https://zijian.aliyun.com/">阿里云网站运维检测平台 (aliyun.com)</a></p>
<p>解析就可以了</p>
<h4 id="web12"><a href="#web12" class="headerlink" title="web12"></a>web12</h4><p>属实没想到啊，，看了题目提示，我一直盯着那些货物，没有滑到下面</p>
<p>查看了官方答案:首先应该查看robots.txt（这是应该解题要做的），发现有一个/admin/，然后在页面下发找到admin的密码</p>
<h5 id="web13"><a href="#web13" class="headerlink" title="web13"></a>web13</h5><p>这题还是很不理解，难道这些人都那么喜欢吧关键点藏在最后面么？把所有的产品都点过了，就是没点下面的。真可恶啊。</p>
<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220120214406106-16427692717891.png" class="" title="image-20220120214406106">







<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220120214905856-16427693130938.png" class="" title="image-20220120214905856">



<p>遇到有关页面的题，全部都要点一遍</p>
<h4 id="web14"><a href="#web14" class="headerlink" title="web14"></a>web14</h4><h5 id="这题的编辑器editor漏洞，一版都是文件上传漏洞"><a href="#这题的编辑器editor漏洞，一版都是文件上传漏洞" class="headerlink" title="这题的编辑器editor漏洞，一版都是文件上传漏洞"></a>这题的编辑器editor漏洞，一版都是文件上传漏洞</h5><p>首先查看源码，查找editor</p>
<p>发现有</p>
<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121101624595-16427693106507.png" class="" title="image-20220121101624595">



<p>因为是文件上传漏洞，所以找到文件上传，又因为默认配置的原因，它显示根目录下所有的目录（与linux目录一样），所有一般会将flag藏在（home var，temp，user）等等目录，然后在这些目录下寻找网页文件（html，这是应该要做的）。然后访问就可以了   （这时应该注意文件路径）</p>
<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121102439323-16427693080146.png" class="" title="image-20220121102439323">



<h4 id="web15"><a href="#web15" class="headerlink" title="web15"></a>web15</h4><p>提示邮箱有问题，注意有两个邮箱，然后尝试访问/admin，真的有，然后把demo当做用户，另外一个邮箱当密码发现不行，最后输入admin发现用户对的，尝试着用字典对密码爆破，发现不行</p>
<p>查看了答案，</p>
<p>要利用那个忘记密码，然后去qq查看他的地址</p>
<h4 id="web16-php探针"><a href="#web16-php探针" class="headerlink" title="web16 php探针"></a>web16 php探针</h4><p>知识盲点：PHP探针</p>
<p>php探针是用来探测空间、服务器运行状况和PHP信息用的，探针可以实时查看服务器硬盘资源、内存占用、网卡 流量、系统负载、服务器时间等信息。</p>
<p>做法：在URL中输入tz.php</p>
<p>然后开始懵逼</p>
<h4 id="web17-备份文件backup"><a href="#web17-备份文件backup" class="headerlink" title="web17    备份文件backup"></a>web17    备份文件backup</h4><p>题目提示是sql的备份文件，所以在URL中输入backup.sq</p>
<h4 id="web18-js代码审计吧"><a href="#web18-js代码审计吧" class="headerlink" title="web18   js代码审计吧"></a>web18   js代码审计吧</h4><p>打开，试玩了一下，果断放弃，，然后通过开发者工具查看源代码，搜一下flag，发现</p>
<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121192314392-16427693002765.png" class="" title="image-20220121192314392">

<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121193054894-16427693190359.png" class="" title="image-20220121193054894">

<p>像这种游戏题，一般都是通过查看源代码，然后查看通管条件，以及通关后有什么来解题</p>
<h4 id="web19-前端"><a href="#web19-前端" class="headerlink" title="web19 前端"></a>web19 前端</h4><p>一般提示到前端，js代码，都要查看源码</p>
<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121193716629-164276932175410.png" class="" title="image-20220121193716629">

<img src="/2022/01/21/web%E5%85%A5%E9%97%A8/image-20220121195139742-164276932419111.png" class="" title="image-20220121195139742">





<h4 id="web20"><a href="#web20" class="headerlink" title="web20"></a>web20</h4><p>db目录：作为数据库的存储文件，</p>
<p>尝试一下db目录下的data.dbd或者mdb.dbd</p>
<p>下载好后直接用记事本打开搜flag就可以了</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
